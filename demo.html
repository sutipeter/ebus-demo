<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eBUS Analytics Platform - Interactive Demo</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .glass-dark {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(10px);
        }

        .sidebar-item {
            transition: all 0.2s ease;
        }

        .sidebar-item:hover {
            background: rgba(59, 130, 246, 0.1);
        }

        .sidebar-item.active {
            background: rgba(59, 130, 246, 0.15);
            border-right: 3px solid #3b82f6;
        }

        .kpi-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .status-dot {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .mobile-frame {
            width: 375px;
            height: 812px;
            border-radius: 40px;
            border: 12px solid #1f2937;
            overflow: hidden;
            position: relative;
        }

        .mobile-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 30px;
            background: #1f2937;
            border-radius: 0 0 20px 20px;
            z-index: 100;
        }

        .fade-enter-active, .fade-leave-active {
            transition: opacity 0.3s ease;
        }

        .fade-enter-from, .fade-leave-to {
            opacity: 0;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 18px;
            height: 18px;
            background: #ef4444;
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        #map {
            height: 300px;
            border-radius: 12px;
        }

        .vehicle-row {
            transition: background 0.2s ease;
        }

        .vehicle-row:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .alert-critical {
            border-left: 4px solid #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .alert-warning {
            border-left: 4px solid #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }

        .alert-info {
            border-left: 4px solid #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        /* Page Transitions */
        .page-enter-active {
            animation: fadeIn 0.3s ease;
        }

        .page-leave-active {
            animation: fadeOut 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }

        /* Card animations */
        .animate-fade-in {
            animation: fadeIn 0.4s ease forwards;
        }

        .animate-slide-up {
            animation: slideUp 0.4s ease forwards;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Stagger animation delays */
        .stagger-1 { animation-delay: 0.05s; }
        .stagger-2 { animation-delay: 0.1s; }
        .stagger-3 { animation-delay: 0.15s; }
        .stagger-4 { animation-delay: 0.2s; }
        .stagger-5 { animation-delay: 0.25s; }

        /* Button hover effects */
        .btn-hover {
            transition: all 0.2s ease;
        }

        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .btn-hover:active {
            transform: translateY(0);
        }

        /* Smooth scroll */
        .smooth-scroll {
            scroll-behavior: smooth;
        }

        /* Loading spinner */
        .spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Glow effect for active items */
        .glow-effect {
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
        }

        /* Skeleton loading */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Progress bar animation */
        .progress-animate {
            animation: progressGrow 1s ease forwards;
        }

        @keyframes progressGrow {
            from { width: 0; }
        }

        /* Bounce effect for notifications */
        .bounce {
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Smooth color transitions */
        .color-transition {
            transition: color 0.2s ease, background-color 0.2s ease;
        }

        /* Mobile page transitions */
        .mobile-page-enter {
            animation: mobileSlideIn 0.3s ease;
        }

        @keyframes mobileSlideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Hover lift effect */
        .hover-lift {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        /* Chart animation */
        .chart-animate {
            animation: chartFadeIn 0.6s ease forwards;
        }

        @keyframes chartFadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="app">
        <!-- PORTAL VIEW -->
        <div v-if="currentView === 'portal'" class="flex min-h-screen">
            <!-- Sidebar -->
            <aside class="w-64 glass-dark text-white flex flex-col">
                <div class="p-6 border-b border-gray-700">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-bus text-xl"></i>
                        </div>
                        <div>
                            <h1 class="font-bold text-lg">eBUS</h1>
                            <p class="text-xs text-gray-400">Analytics Platform</p>
                        </div>
                    </div>
                </div>

                <!-- View Switcher -->
                <div class="p-4 border-b border-gray-700">
                    <div class="flex flex-col gap-2">
                        <button
                            @click="currentView = 'portal'"
                            :class="['px-3 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2', currentView === 'portal' ? 'bg-blue-500 text-white' : 'text-gray-300 hover:bg-gray-700']"
                        >
                            <i class="fas fa-desktop"></i>Portal View
                        </button>
                        <button
                            @click="currentView = 'admin'"
                            :class="['px-3 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2', currentView === 'admin' ? 'bg-purple-500 text-white' : 'text-gray-300 hover:bg-gray-700']"
                        >
                            <i class="fas fa-cog"></i>Admin View
                        </button>
                        <button
                            @click="currentView = 'mobile'"
                            :class="['px-3 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2', currentView === 'mobile' ? 'bg-green-500 text-white' : 'text-gray-300 hover:bg-gray-700']"
                        >
                            <i class="fas fa-mobile-alt"></i>Mobile View
                        </button>
                    </div>
                </div>

                <nav class="flex-1 p-4">
                    <div class="space-y-1">
                        <a
                            v-for="item in portalMenu"
                            :key="item.id"
                            @click="portalPage = item.id"
                            :class="['sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer', portalPage === item.id ? 'active text-blue-400' : 'text-gray-300']"
                        >
                            <i :class="[item.icon, 'w-5']"></i>
                            <span>{{ item.label }}</span>
                            <span v-if="item.badge" class="ml-auto bg-red-500 text-white text-xs px-2 py-0.5 rounded-full">{{ item.badge }}</span>
                        </a>
                    </div>
                </nav>

                <div class="mt-auto p-4 border-t border-gray-700">
                    <div class="flex items-center gap-3">
                        <img src="https://ui-avatars.com/api/?name=Keolis+NL&background=3b82f6&color=fff" class="w-10 h-10 rounded-full">
                        <div>
                            <p class="font-medium text-sm">Keolis Nederland</p>
                            <p class="text-xs text-gray-400">Enterprise Plan</p>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 p-8">
                <!-- Analytics Overview Page (Dashboard) -->
                <div v-if="portalPage === 'dashboard'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Analytics Overview</h2>
                            <p class="text-gray-500">Your fleet performance vs. industry benchmarks</p>
                        </div>
                        <div class="flex gap-3">
                            <select class="bg-white border rounded-lg px-4 py-2 text-sm">
                                <option>Last 30 days</option>
                                <option>Last Quarter</option>
                                <option>Year to Date</option>
                            </select>
                            <button class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-download mr-2"></i>Export Report
                            </button>
                        </div>
                    </div>

                    <!-- Data Sources Banner -->
                    <div class="glass rounded-2xl p-4 mb-8 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <i class="fas fa-plug text-blue-500 text-xl"></i>
                                <div>
                                    <p class="font-medium text-gray-800">Connected Data Sources</p>
                                    <p class="text-sm text-gray-500">Receiving real-time data from your fleet management systems</p>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">
                                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                    ViriCiti
                                </span>
                                <span class="flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm">
                                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                    INIT
                                </span>
                                <span class="text-gray-400 text-sm">42 vehicles synced</span>
                            </div>
                        </div>
                    </div>

                    <!-- Overall Performance Score -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="col-span-1 glass rounded-2xl p-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white">
                            <h4 class="text-blue-100 text-sm mb-2">Overall Performance</h4>
                            <p class="text-5xl font-bold mb-2">82</p>
                            <p class="text-blue-200 text-sm">vs 74 industry average</p>
                            <div class="mt-4 flex items-center gap-2">
                                <i class="fas fa-arrow-up"></i>
                                <span class="text-sm">Top 18% in EU</span>
                            </div>
                        </div>
                        <div class="col-span-3 glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-chart-bar mr-2 text-purple-500"></i>Performance vs. Benchmark
                                <span class="text-sm font-normal text-gray-500 ml-2">Based on 1,247 similar vehicles across EU</span>
                            </h3>
                            <div class="space-y-5">
                                <div class="flex items-center gap-4">
                                    <span class="w-32 text-sm text-gray-600">Energy Efficiency</span>
                                    <div class="flex-1 h-10 bg-gray-100 rounded-lg overflow-hidden relative">
                                        <div class="absolute h-full bg-gray-300" style="left: 20%; width: 60%"></div>
                                        <div class="absolute h-full bg-blue-600 flex items-center justify-center" style="left: 75%; width: 50px;">
                                            <span class="text-white text-xs font-semibold">1.18</span>
                                        </div>
                                    </div>
                                    <span class="w-24 text-right text-sm text-green-600 font-medium">+8% better</span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <span class="w-32 text-sm text-gray-600">Battery Health</span>
                                    <div class="flex-1 h-10 bg-gray-100 rounded-lg overflow-hidden relative">
                                        <div class="absolute h-full bg-gray-300" style="left: 25%; width: 50%"></div>
                                        <div class="absolute h-full bg-blue-600 flex items-center justify-center" style="left: 70%; width: 50px;">
                                            <span class="text-white text-xs font-semibold">91%</span>
                                        </div>
                                    </div>
                                    <span class="w-24 text-right text-sm text-green-600 font-medium">+6% better</span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <span class="w-32 text-sm text-gray-600">Charging Efficiency</span>
                                    <div class="flex-1 h-10 bg-gray-100 rounded-lg overflow-hidden relative">
                                        <div class="absolute h-full bg-gray-300" style="left: 30%; width: 45%"></div>
                                        <div class="absolute h-full bg-yellow-500 flex items-center justify-center" style="left: 55%; width: 50px;">
                                            <span class="text-white text-xs font-semibold">88%</span>
                                        </div>
                                    </div>
                                    <span class="w-24 text-right text-sm text-yellow-600 font-medium">Average</span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <span class="w-32 text-sm text-gray-600">Fleet Utilization</span>
                                    <div class="flex-1 h-10 bg-gray-100 rounded-lg overflow-hidden relative">
                                        <div class="absolute h-full bg-gray-300" style="left: 20%; width: 55%"></div>
                                        <div class="absolute h-full bg-blue-600 flex items-center justify-center" style="left: 80%; width: 50px;">
                                            <span class="text-white text-xs font-semibold">94%</span>
                                        </div>
                                    </div>
                                    <span class="w-24 text-right text-sm text-green-600 font-medium">+12% better</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Insights & Recommendations -->
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <div class="col-span-2 glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>AI-Powered Insights
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-start gap-4 p-4 bg-green-50 rounded-xl border-l-4 border-green-500">
                                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-trophy text-green-500"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Energy efficiency is in top 20%</p>
                                        <p class="text-sm text-gray-600 mt-1">Your Mercedes eCitaro fleet averages 1.18 kWh/km, compared to 1.28 kWh/km industry average for similar routes.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4 p-4 bg-yellow-50 rounded-xl border-l-4 border-yellow-500">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-bolt text-yellow-500"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Charging optimization opportunity</p>
                                        <p class="text-sm text-gray-600 mt-1">Shifting 15% of charging to off-peak hours could save <strong>~€8,500/month</strong>. Similar fleets achieve 68% off-peak charging vs your 52%.</p>
                                    </div>
                                </div>
                                <div class="flex items-start gap-4 p-4 bg-blue-50 rounded-xl border-l-4 border-blue-500">
                                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-battery-three-quarters text-blue-500"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">3 vehicles showing early degradation</p>
                                        <p class="text-sm text-gray-600 mt-1">BUS-004, BUS-012, BUS-023 show 5-8% higher degradation rate than benchmark. Recommend diagnostic review.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-bell mr-2 text-red-500"></i>Analytics Alerts
                            </h3>
                            <div class="space-y-3">
                                <div class="p-3 bg-red-50 rounded-lg border-l-4 border-red-500">
                                    <p class="font-medium text-sm text-gray-800">Below benchmark: BUS-004</p>
                                    <p class="text-xs text-gray-500">SoH 78% vs 85% expected</p>
                                </div>
                                <div class="p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                    <p class="font-medium text-sm text-gray-800">Efficiency drop detected</p>
                                    <p class="text-xs text-gray-500">Route 5 buses -12% this week</p>
                                </div>
                                <div class="p-3 bg-blue-50 rounded-lg border-l-4 border-blue-500">
                                    <p class="font-medium text-sm text-gray-800">New benchmark available</p>
                                    <p class="text-xs text-gray-500">Q4 2024 data from 1,247 vehicles</p>
                                </div>
                            </div>
                            <button class="w-full mt-4 text-blue-500 text-sm font-medium">View all alerts →</button>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-chart-line mr-2 text-green-500"></i>Efficiency Trend vs. Benchmark
                            </h3>
                            <div style="height: 300px;">
                                <canvas id="efficiencyChart"></canvas>
                            </div>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-battery-three-quarters mr-2 text-blue-500"></i>Battery Health Distribution
                            </h3>
                            <div style="height: 300px;">
                                <canvas id="socChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance Analysis Page -->
                <div v-if="portalPage === 'performance'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Performance Analysis</h2>
                            <p class="text-gray-500">Real vs. theoretical range, consumption patterns, and efficiency analysis</p>
                        </div>
                        <div class="flex gap-3">
                            <select class="bg-white border rounded-lg px-4 py-2 text-sm">
                                <option>Last 30 days</option>
                                <option>Last Quarter</option>
                                <option>Last Year</option>
                            </select>
                            <button class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-download mr-2"></i>Export Analysis
                            </button>
                        </div>
                    </div>

                    <!-- Key Performance Metrics -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-route text-xl text-blue-500"></i>
                                </div>
                                <span class="text-sm font-medium text-green-500">+12%</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">237 km</p>
                            <p class="text-gray-500 text-sm mt-1">Avg. Real Range</p>
                            <p class="text-xs text-gray-400 mt-1">vs 212 km theoretical</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-leaf text-xl text-green-500"></i>
                                </div>
                                <span class="text-sm font-medium text-green-500">+8%</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">1.18</p>
                            <p class="text-gray-500 text-sm mt-1">kWh/km Efficiency</p>
                            <p class="text-xs text-gray-400 mt-1">Benchmark: 1.28 kWh/km</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-calendar-day text-xl text-yellow-500"></i>
                                </div>
                                <span class="text-sm font-medium text-blue-500">Stable</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">-2.3%</p>
                            <p class="text-gray-500 text-sm mt-1">Seasonal Impact</p>
                            <p class="text-xs text-gray-400 mt-1">Winter vs Summer</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-users text-xl text-purple-500"></i>
                                </div>
                                <span class="text-sm font-medium text-green-500">Low</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">+3.2%</p>
                            <p class="text-gray-500 text-sm mt-1">Load Impact</p>
                            <p class="text-xs text-gray-400 mt-1">per 10 passengers</p>
                        </div>
                    </div>

                    <!-- Range Analysis Chart -->
                    <div class="glass rounded-2xl p-6 mb-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-chart-area mr-2 text-blue-500"></i>Real vs. Theoretical Range Comparison
                        </h3>
                        <div class="grid grid-cols-2 gap-6">
                            <div>
                                <div class="mb-5">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm text-gray-600">Theoretical Range (Factory Spec)</span>
                                        <span class="text-sm font-semibold text-gray-400">212 km</span>
                                    </div>
                                    <div class="w-full h-4 bg-gray-200 rounded-full overflow-hidden">
                                        <div class="h-full bg-gray-400 rounded-full" style="width: 89%"></div>
                                    </div>
                                </div>
                                <div class="mb-5">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm text-gray-600">Your Fleet Average</span>
                                        <span class="text-sm font-semibold text-green-600">237 km (+12%)</span>
                                    </div>
                                    <div class="w-full h-4 bg-gray-200 rounded-full overflow-hidden">
                                        <div class="h-full bg-green-500 rounded-full" style="width: 100%"></div>
                                    </div>
                                </div>
                                <div class="mb-5">
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-sm text-gray-600">Industry Benchmark</span>
                                        <span class="text-sm font-semibold text-blue-600">221 km</span>
                                    </div>
                                    <div class="w-full h-4 bg-gray-200 rounded-full overflow-hidden">
                                        <div class="h-full bg-blue-500 rounded-full" style="width: 93%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-blue-50 rounded-xl p-4">
                                <div class="flex items-start gap-3">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-lightbulb text-blue-500"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-800 mb-2">AI Insight</h4>
                                        <p class="text-sm text-gray-600 mb-2">Your fleet is performing <strong>+12% above theoretical range</strong> and <strong>+7% above industry benchmark</strong>.</p>
                                        <p class="text-sm text-gray-600 mb-2"><strong>Key factors contributing to superior performance:</strong></p>
                                        <ul class="text-sm text-gray-600 space-y-1 ml-4">
                                            <li>• Excellent driver eco-training (avg score: 92/100)</li>
                                            <li>• Optimal route planning (low elevation change)</li>
                                            <li>• Smart HVAC usage (climate pre-conditioning)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Route-specific Performance -->
                    <div class="glass rounded-2xl p-6 mb-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-map-marked-alt mr-2 text-purple-500"></i>Route-Specific Consumption Profiles
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-green-50 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                        <span class="font-bold text-green-600">R5</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Route 5 - Amsterdam Centrum</p>
                                        <p class="text-sm text-gray-500">Flat terrain, frequent stops, heavy traffic</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-green-600">1.08</p>
                                    <p class="text-xs text-gray-500">kWh/km</p>
                                    <p class="text-xs text-green-600">Best efficiency</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-blue-50 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                        <span class="font-bold text-blue-600">R12</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Route 12 - Noord-Zuid</p>
                                        <p class="text-sm text-gray-500">Mixed terrain, moderate stops</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-blue-600">1.18</p>
                                    <p class="text-xs text-gray-500">kWh/km</p>
                                    <p class="text-xs text-blue-600">Fleet average</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-yellow-50 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
                                        <span class="font-bold text-yellow-600">R22</span>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">Route 22 - Hilly District</p>
                                        <p class="text-sm text-gray-500">Significant elevation, highway sections</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-2xl font-bold text-yellow-600">1.35</p>
                                    <p class="text-xs text-gray-500">kWh/km</p>
                                    <p class="text-xs text-yellow-600">+14% elevation impact</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Driving Style & Weather Impact -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-user-tie mr-2 text-green-500"></i>Driving Style Impact (Eco-Driving Score)
                            </h3>
                            <div class="mb-4">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm text-gray-600">Fleet Average Eco Score</span>
                                    <span class="text-2xl font-bold text-green-600">92/100</span>
                                </div>
                                <div class="w-full h-4 bg-gray-200 rounded-full">
                                    <div class="h-full bg-green-500 rounded-full" style="width: 92%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">Benchmark: 84/100 • +10% better</p>
                            </div>
                            <div class="space-y-3 mt-4">
                                <div class="flex justify-between items-center text-sm">
                                    <span class="text-gray-600">Smooth acceleration</span>
                                    <span class="font-medium text-green-600">95%</span>
                                </div>
                                <div class="flex justify-between items-center text-sm">
                                    <span class="text-gray-600">Regenerative braking use</span>
                                    <span class="font-medium text-green-600">89%</span>
                                </div>
                                <div class="flex justify-between items-center text-sm">
                                    <span class="text-gray-600">Optimal speed maintenance</span>
                                    <span class="font-medium text-green-600">91%</span>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-green-50 rounded-lg">
                                <p class="text-sm text-gray-600">
                                    <i class="fas fa-trophy text-green-500 mr-2"></i>
                                    <strong>Savings from eco-driving:</strong> ~€12,400/year in energy costs
                                </p>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-cloud-sun mr-2 text-yellow-500"></i>Weather & Season Impact
                            </h3>
                            <div class="space-y-4">
                                <div class="p-3 bg-blue-50 rounded-xl">
                                    <div class="flex justify-between items-center mb-2">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-snowflake text-blue-500"></i>
                                            <span class="font-medium text-gray-800">Winter (Dec-Feb)</span>
                                        </div>
                                        <span class="text-red-600 font-medium">-8.2%</span>
                                    </div>
                                    <p class="text-xs text-gray-500">Avg: 1.28 kWh/km (HVAC heating impact)</p>
                                </div>
                                <div class="p-3 bg-green-50 rounded-xl">
                                    <div class="flex justify-between items-center mb-2">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-leaf text-green-500"></i>
                                            <span class="font-medium text-gray-800">Spring/Fall (Mar-May, Sep-Nov)</span>
                                        </div>
                                        <span class="text-green-600 font-medium">+2.1%</span>
                                    </div>
                                    <p class="text-xs text-gray-500">Avg: 1.15 kWh/km (Optimal conditions)</p>
                                </div>
                                <div class="p-3 bg-yellow-50 rounded-xl">
                                    <div class="flex justify-between items-center mb-2">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-sun text-yellow-500"></i>
                                            <span class="font-medium text-gray-800">Summer (Jun-Aug)</span>
                                        </div>
                                        <span class="text-yellow-600 font-medium">-4.5%</span>
                                    </div>
                                    <p class="text-xs text-gray-500">Avg: 1.23 kWh/km (A/C cooling impact)</p>
                                </div>
                            </div>
                            <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                                <p class="text-sm text-gray-600">
                                    <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                                    <strong>Tip:</strong> Pre-conditioning while charging reduces HVAC impact by ~15%
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fleet Insights Page -->
                <div v-if="portalPage === 'insights'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Fleet Insights</h2>
                            <p class="text-gray-500">Performance analysis based on benchmark data</p>
                        </div>
                        <div class="flex gap-3">
                            <select class="bg-white border rounded-lg px-4 py-2 text-sm">
                                <option>All Vehicles</option>
                                <option>Underperforming</option>
                                <option>Top Performers</option>
                            </select>
                        </div>
                    </div>

                    <!-- Fleet Summary -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6 text-center">
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-check text-2xl text-green-500"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">35</p>
                            <p class="text-sm text-gray-500">Above Benchmark</p>
                        </div>
                        <div class="glass rounded-2xl p-6 text-center">
                            <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-minus text-2xl text-yellow-500"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">4</p>
                            <p class="text-sm text-gray-500">At Benchmark</p>
                        </div>
                        <div class="glass rounded-2xl p-6 text-center">
                            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-exclamation text-2xl text-red-500"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">3</p>
                            <p class="text-sm text-gray-500">Below Benchmark</p>
                        </div>
                        <div class="glass rounded-2xl p-6 text-center">
                            <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <i class="fas fa-database text-2xl text-blue-500"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">1,247</p>
                            <p class="text-sm text-gray-500">Benchmark Sample</p>
                        </div>
                    </div>

                    <!-- Underperforming Vehicles -->
                    <div class="glass rounded-2xl p-6 mb-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-exclamation-triangle mr-2 text-red-500"></i>Vehicles Requiring Attention
                            <span class="text-sm font-normal text-gray-500 ml-2">Below benchmark performance</span>
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-red-50 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-bus text-red-500"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">BUS-004 • Mercedes eCitaro</p>
                                        <p class="text-sm text-gray-500">Battery SoH 78% (benchmark: 85%)</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-red-600 font-medium">-7% below benchmark</p>
                                    <p class="text-xs text-gray-500">Recommend diagnostic review</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-yellow-50 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-bus text-yellow-500"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">BUS-012 • Solaris Urbino</p>
                                        <p class="text-sm text-gray-500">Efficiency 1.42 kWh/km (benchmark: 1.28)</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-yellow-600 font-medium">+11% consumption</p>
                                    <p class="text-xs text-gray-500">Check tire pressure & HVAC</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-yellow-50 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-bus text-yellow-500"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800">BUS-023 • VDL Citea</p>
                                        <p class="text-sm text-gray-500">Degradation rate: 1.2%/month (benchmark: 0.7%)</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <p class="text-yellow-600 font-medium">Fast degradation</p>
                                    <p class="text-xs text-gray-500">Charging pattern review</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top Performers -->
                    <div class="glass rounded-2xl p-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-trophy mr-2 text-green-500"></i>Top Performing Vehicles
                            <span class="text-sm font-normal text-gray-500 ml-2">Significantly above benchmark</span>
                        </h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="p-4 bg-green-50 rounded-xl">
                                <div class="flex items-center justify-between mb-2">
                                    <p class="font-medium text-gray-800">BUS-001</p>
                                    <span class="text-green-600 text-sm font-medium">+15%</span>
                                </div>
                                <p class="text-sm text-gray-500">Best efficiency: 1.08 kWh/km</p>
                            </div>
                            <div class="p-4 bg-green-50 rounded-xl">
                                <div class="flex items-center justify-between mb-2">
                                    <p class="font-medium text-gray-800">BUS-007</p>
                                    <span class="text-green-600 text-sm font-medium">+12%</span>
                                </div>
                                <p class="text-sm text-gray-500">Best SoH: 96% after 2 years</p>
                            </div>
                            <div class="p-4 bg-green-50 rounded-xl">
                                <div class="flex items-center justify-between mb-2">
                                    <p class="font-medium text-gray-800">BUS-015</p>
                                    <span class="text-green-600 text-sm font-medium">+10%</span>
                                </div>
                                <p class="text-sm text-gray-500">Highest uptime: 98.5%</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Battery Health Page -->
                <div v-if="portalPage === 'battery'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Battery Health Analysis</h2>
                            <p class="text-gray-500">State of Health monitoring and predictions</p>
                        </div>
                    </div>

                    <!-- Battery KPIs -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-battery-full text-xl text-green-500"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">91.2%</p>
                            <p class="text-gray-500 text-sm mt-1">Fleet Avg. SoH</p>
                            <p class="text-sm text-green-500 mt-2">+6% vs benchmark</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-clock text-xl text-blue-500"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">7.2 <span class="text-lg font-normal text-gray-500">yrs</span></p>
                            <p class="text-gray-500 text-sm mt-1">Predicted Avg. Life</p>
                            <p class="text-sm text-green-500 mt-2">+1.2 yrs vs benchmark</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-chart-line text-xl text-yellow-500"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">0.65%</p>
                            <p class="text-gray-500 text-sm mt-1">Avg. Monthly Degradation</p>
                            <p class="text-sm text-green-500 mt-2">-0.15% vs benchmark</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-exclamation-triangle text-xl text-red-500"></i>
                                </div>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">3</p>
                            <p class="text-gray-500 text-sm mt-1">Batteries at Risk</p>
                            <p class="text-sm text-red-500 mt-2">Require attention</p>
                        </div>
                    </div>

                    <!-- SoH Distribution vs Benchmark -->
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-chart-bar mr-2 text-purple-500"></i>SoH Distribution vs. Benchmark
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-600">95-100% (Excellent)</span>
                                        <span class="text-gray-800 font-medium">12 vehicles</span>
                                    </div>
                                    <div class="flex gap-2 items-center">
                                        <div class="flex-1 h-6 bg-gray-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-green-500 rounded-full" style="width: 29%"></div>
                                        </div>
                                        <span class="text-xs text-gray-500 w-16">29% (vs 22%)</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-600">90-95% (Good)</span>
                                        <span class="text-gray-800 font-medium">18 vehicles</span>
                                    </div>
                                    <div class="flex gap-2 items-center">
                                        <div class="flex-1 h-6 bg-gray-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-green-400 rounded-full" style="width: 43%"></div>
                                        </div>
                                        <span class="text-xs text-gray-500 w-16">43% (vs 38%)</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-600">85-90% (Acceptable)</span>
                                        <span class="text-gray-800 font-medium">9 vehicles</span>
                                    </div>
                                    <div class="flex gap-2 items-center">
                                        <div class="flex-1 h-6 bg-gray-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-yellow-400 rounded-full" style="width: 21%"></div>
                                        </div>
                                        <span class="text-xs text-gray-500 w-16">21% (vs 28%)</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span class="text-gray-600">&lt;85% (Concern)</span>
                                        <span class="text-gray-800 font-medium">3 vehicles</span>
                                    </div>
                                    <div class="flex gap-2 items-center">
                                        <div class="flex-1 h-6 bg-gray-100 rounded-full overflow-hidden">
                                            <div class="h-full bg-red-400 rounded-full" style="width: 7%"></div>
                                        </div>
                                        <span class="text-xs text-gray-500 w-16">7% (vs 12%)</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-calendar-alt mr-2 text-blue-500"></i>Replacement Forecast
                            </h3>
                            <div class="space-y-3">
                                <div class="p-3 bg-red-50 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-800">BUS-004</p>
                                        <p class="text-xs text-gray-500">SoH: 78% • Degrading fast</p>
                                    </div>
                                    <span class="text-red-600 font-medium">~12 months</span>
                                </div>
                                <div class="p-3 bg-yellow-50 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-800">BUS-023</p>
                                        <p class="text-xs text-gray-500">SoH: 82% • Monitor closely</p>
                                    </div>
                                    <span class="text-yellow-600 font-medium">~18 months</span>
                                </div>
                                <div class="p-3 bg-yellow-50 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-800">BUS-019</p>
                                        <p class="text-xs text-gray-500">SoH: 84% • On track</p>
                                    </div>
                                    <span class="text-yellow-600 font-medium">~24 months</span>
                                </div>
                                <div class="p-3 bg-gray-50 rounded-lg flex items-center justify-between">
                                    <div>
                                        <p class="font-medium text-gray-800">Rest of fleet (39)</p>
                                        <p class="text-xs text-gray-500">SoH: 85%+ • Healthy</p>
                                    </div>
                                    <span class="text-gray-600 font-medium">&gt;3 years</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Sources Page -->
                <div v-if="portalPage === 'datasources'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Data Sources</h2>
                            <p class="text-gray-500">Connected fleet management systems and integrations</p>
                        </div>
                        <button class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                            <i class="fas fa-plus mr-2"></i>Add Integration
                        </button>
                    </div>

                    <!-- Integration Status -->
                    <div class="glass rounded-2xl p-6 mb-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-link mr-2 text-blue-500"></i>Active Integrations
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-14 h-14 bg-orange-500 rounded-xl flex items-center justify-center text-white font-bold text-lg">VC</div>
                                    <div>
                                        <p class="font-semibold text-gray-800">ViriCiti</p>
                                        <p class="text-sm text-gray-500">Telematics & Real-time data</p>
                                        <p class="text-xs text-gray-400 mt-1">Last sync: 2 minutes ago</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                        <span class="text-green-600 font-medium">Connected</span>
                                    </div>
                                    <p class="text-sm text-gray-500">28 vehicles synced</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-green-50 border border-green-200 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-14 h-14 bg-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-lg">IN</div>
                                    <div>
                                        <p class="font-semibold text-gray-800">INIT / HanseCom</p>
                                        <p class="text-sm text-gray-500">Fleet Management System</p>
                                        <p class="text-xs text-gray-400 mt-1">Last sync: 5 minutes ago</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                                        <span class="text-green-600 font-medium">Connected</span>
                                    </div>
                                    <p class="text-sm text-gray-500">42 vehicles synced</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 bg-yellow-50 border border-yellow-200 rounded-xl">
                                <div class="flex items-center gap-4">
                                    <div class="w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center text-white">
                                        <i class="fas fa-charging-station text-xl"></i>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-gray-800">OCPP Charging Stations</p>
                                        <p class="text-sm text-gray-500">Depot chargers via OCPP 1.6J</p>
                                        <p class="text-xs text-gray-400 mt-1">12 chargers connected</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                                        <span class="text-yellow-600 font-medium">2 Offline</span>
                                    </div>
                                    <p class="text-sm text-gray-500">10/12 online</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Available Integrations -->
                    <div class="glass rounded-2xl p-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-puzzle-piece mr-2 text-purple-500"></i>Available Integrations
                        </h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="p-4 border rounded-xl hover:shadow-md transition-shadow cursor-pointer">
                                <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center mb-3">
                                    <span class="font-bold text-indigo-600">SW</span>
                                </div>
                                <p class="font-medium text-gray-800">SWARCO</p>
                                <p class="text-xs text-gray-500 mt-1">Traffic management & ITS</p>
                                <button class="mt-3 text-blue-500 text-sm font-medium">Connect →</button>
                            </div>
                            <div class="p-4 border rounded-xl hover:shadow-md transition-shadow cursor-pointer">
                                <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-3">
                                    <span class="font-bold text-purple-600">OP</span>
                                </div>
                                <p class="font-medium text-gray-800">Optibus</p>
                                <p class="text-xs text-gray-500 mt-1">Scheduling optimization</p>
                                <button class="mt-3 text-blue-500 text-sm font-medium">Connect →</button>
                            </div>
                            <div class="p-4 border rounded-xl hover:shadow-md transition-shadow cursor-pointer">
                                <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-3">
                                    <i class="fas fa-bus text-blue-600"></i>
                                </div>
                                <p class="font-medium text-gray-800">Daimler Fleetboard</p>
                                <p class="text-xs text-gray-500 mt-1">OEM telematics</p>
                                <button class="mt-3 text-blue-500 text-sm font-medium">Connect →</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- OLD Analytics Page - REMOVED, replaced by new dashboard -->
                <div v-if="portalPage === 'analytics_old_unused'">
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6">
                            <h4 class="text-sm font-medium text-gray-500 mb-2">Avg. Energy Efficiency</h4>
                            <p class="text-3xl font-bold text-gray-800">1.18 <span class="text-lg font-normal text-gray-500">kWh/km</span></p>
                            <p class="text-sm text-green-500 mt-2"><i class="fas fa-arrow-down mr-1"></i>8% better than industry avg</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <h4 class="text-sm font-medium text-gray-500 mb-2">Fleet Uptime</h4>
                            <p class="text-3xl font-bold text-gray-800">94.8<span class="text-lg font-normal text-gray-500">%</span></p>
                            <p class="text-sm text-green-500 mt-2"><i class="fas fa-arrow-up mr-1"></i>2.3% vs last month</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <h4 class="text-sm font-medium text-gray-500 mb-2">CO2 Avoided</h4>
                            <p class="text-3xl font-bold text-gray-800">156 <span class="text-lg font-normal text-gray-500">tons</span></p>
                            <p class="text-sm text-gray-500 mt-2">This quarter</p>
                        </div>
                    </div>

                    <!-- Benchmark Section -->
                    <div class="glass rounded-2xl p-6 mb-8">
                        <h3 class="font-semibold text-gray-800 mb-6">
                            <i class="fas fa-chart-bar mr-2 text-purple-500"></i>Industry Benchmark Comparison
                        </h3>
                        <div class="grid grid-cols-4 gap-6">
                            <div v-for="benchmark in benchmarks" :key="benchmark.label" class="text-center">
                                <div class="relative w-24 h-24 mx-auto mb-3">
                                    <svg class="w-24 h-24 transform -rotate-90">
                                        <circle cx="48" cy="48" r="40" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                                        <circle cx="48" cy="48" r="40" :stroke="benchmark.color" stroke-width="8" fill="none"
                                            :stroke-dasharray="251.2"
                                            :stroke-dashoffset="251.2 - (251.2 * benchmark.value / 100)"
                                            stroke-linecap="round"/>
                                    </svg>
                                    <div class="absolute inset-0 flex items-center justify-center">
                                        <span class="text-xl font-bold text-gray-800">{{ benchmark.value }}%</span>
                                    </div>
                                </div>
                                <p class="font-medium text-gray-800">{{ benchmark.label }}</p>
                                <p class="text-xs text-gray-500">vs {{ benchmark.industryAvg }}% avg</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charging Analysis Page -->
                <div v-if="portalPage === 'charging'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Charging Analysis</h2>
                            <p class="text-gray-500">Charging patterns and optimization vs. industry benchmark</p>
                        </div>
                        <div class="flex gap-3">
                            <select class="bg-white border rounded-lg px-4 py-2 text-sm">
                                <option>Last 30 days</option>
                                <option>Last Quarter</option>
                            </select>
                            <button class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-download mr-2"></i>Export Report
                            </button>
                        </div>
                    </div>

                    <!-- Charging Performance vs Benchmark -->
                    <div class="glass rounded-2xl p-6 mb-8 border-l-4 border-yellow-500">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-lightbulb text-yellow-500 text-xl"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-800 mb-2">Charging Optimization Opportunity</h3>
                                <p class="text-gray-600 text-sm mb-3">Your fleet charges 52% during off-peak hours. Top performers in the benchmark achieve <strong>68%</strong>. Improving to benchmark level could save <strong>~€8,500/month</strong> in energy costs.</p>
                                <button class="text-blue-500 text-sm font-medium">View optimization recommendations →</button>
                            </div>
                        </div>
                    </div>

                    <!-- Charging KPIs with Benchmark -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="kpi-card glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center">
                                    <i class="fas fa-bolt text-xl text-green-500"></i>
                                </div>
                                <span class="text-sm font-medium text-green-500">+8%</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">92%</p>
                            <p class="text-gray-500 text-sm mt-1">Charging Efficiency</p>
                            <p class="text-xs text-gray-400 mt-1">Benchmark: 85%</p>
                        </div>
                        <div class="kpi-card glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 rounded-xl bg-yellow-100 flex items-center justify-center">
                                    <i class="fas fa-moon text-xl text-yellow-500"></i>
                                </div>
                                <span class="text-sm font-medium text-yellow-500">-16%</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">52%</p>
                            <p class="text-gray-500 text-sm mt-1">Off-Peak Ratio</p>
                            <p class="text-xs text-gray-400 mt-1">Benchmark: 68%</p>
                        </div>
                        <div class="kpi-card glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center">
                                    <i class="fas fa-euro-sign text-xl text-blue-500"></i>
                                </div>
                                <span class="text-sm font-medium text-green-500">-12%</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">€0.18</p>
                            <p class="text-gray-500 text-sm mt-1">Avg. Cost/kWh</p>
                            <p class="text-xs text-gray-400 mt-1">Benchmark: €0.21</p>
                        </div>
                        <div class="kpi-card glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 rounded-xl bg-purple-100 flex items-center justify-center">
                                    <i class="fas fa-battery-full text-xl text-purple-500"></i>
                                </div>
                                <span class="text-sm font-medium text-green-500">+5%</span>
                            </div>
                            <p class="text-3xl font-bold text-gray-800">0.4%</p>
                            <p class="text-gray-500 text-sm mt-1">Battery Stress/Month</p>
                            <p class="text-xs text-gray-400 mt-1">Benchmark: 0.6%</p>
                        </div>
                    </div>

                    <!-- Charging Stations Grid -->
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <div v-for="station in chargingStations" :key="station.id" class="glass rounded-2xl p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-3">
                                    <div :class="['w-10 h-10 rounded-xl flex items-center justify-center', station.status === 'charging' ? 'bg-green-100' : station.status === 'available' ? 'bg-blue-100' : 'bg-gray-100']">
                                        <i :class="['fas fa-charging-station', station.status === 'charging' ? 'text-green-500' : station.status === 'available' ? 'text-blue-500' : 'text-gray-400']"></i>
                                    </div>
                                    <div>
                                        <p class="font-semibold text-gray-800">{{ station.name }}</p>
                                        <p class="text-xs text-gray-500">{{ station.type }}</p>
                                    </div>
                                </div>
                                <span :class="['px-3 py-1 rounded-full text-xs font-medium', station.status === 'charging' ? 'bg-green-100 text-green-700' : station.status === 'available' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-600']">
                                    {{ station.status === 'charging' ? 'Charging' : station.status === 'available' ? 'Available' : 'Offline' }}
                                </span>
                            </div>

                            <div v-if="station.status === 'charging'" class="mb-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-gray-500">{{ station.vehicle }}</span>
                                    <span class="font-medium text-gray-700">{{ station.progress }}%</span>
                                </div>
                                <div class="w-full h-3 bg-gray-200 rounded-full overflow-hidden">
                                    <div class="h-full bg-gradient-to-r from-green-400 to-green-500 rounded-full transition-all duration-500" :style="{width: station.progress + '%'}"></div>
                                </div>
                                <div class="flex justify-between text-xs text-gray-400 mt-2">
                                    <span>{{ station.powerNow }} kW</span>
                                    <span>~{{ station.timeRemaining }} min remaining</span>
                                </div>
                            </div>

                            <div class="flex justify-between items-center pt-3 border-t">
                                <div class="text-sm">
                                    <span class="text-gray-500">Max Power:</span>
                                    <span class="font-medium text-gray-700 ml-1">{{ station.maxPower }} kW</span>
                                </div>
                                <button class="text-blue-500 hover:text-blue-700 text-sm font-medium">
                                    <i class="fas fa-cog mr-1"></i>Configure
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Charging Schedule & Cost Optimization -->
                    <div class="grid grid-cols-2 gap-6">
                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-calendar-alt mr-2 text-blue-500"></i>Today's Charging Schedule
                            </h3>
                            <div class="space-y-3">
                                <div v-for="schedule in chargingSchedule" :key="schedule.id" class="flex items-center gap-4 p-3 bg-gray-50 rounded-xl">
                                    <div class="text-center min-w-16">
                                        <p class="text-sm font-semibold text-gray-800">{{ schedule.time }}</p>
                                        <p class="text-xs text-gray-500">{{ schedule.duration }}</p>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-gray-800">{{ schedule.vehicle }}</p>
                                        <p class="text-xs text-gray-500">{{ schedule.station }} • {{ schedule.targetSoc }}% target</p>
                                    </div>
                                    <div :class="['px-2 py-1 rounded text-xs font-medium', schedule.tariff === 'off-peak' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700']">
                                        {{ schedule.tariff === 'off-peak' ? 'Off-Peak' : 'Peak' }}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-coins mr-2 text-yellow-500"></i>Energy Cost Optimization
                            </h3>
                            <div class="mb-6">
                                <div class="flex justify-between items-end mb-2">
                                    <span class="text-sm text-gray-500">This Month Savings</span>
                                    <span class="text-2xl font-bold text-green-600">€2,340</span>
                                </div>
                                <div class="w-full h-2 bg-gray-200 rounded-full">
                                    <div class="h-full bg-green-500 rounded-full" style="width: 78%"></div>
                                </div>
                                <p class="text-xs text-gray-400 mt-1">78% of potential savings achieved</p>
                            </div>

                            <div class="space-y-3">
                                <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-moon text-green-600"></i>
                                        <span class="text-sm text-gray-700">Off-peak charging</span>
                                    </div>
                                    <span class="font-semibold text-green-600">-€1,850</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-blue-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-solar-panel text-blue-600"></i>
                                        <span class="text-sm text-gray-700">Solar utilization</span>
                                    </div>
                                    <span class="font-semibold text-blue-600">-€320</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-purple-50 rounded-xl">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-tachometer-alt text-purple-600"></i>
                                        <span class="text-sm text-gray-700">Smart load balancing</span>
                                    </div>
                                    <span class="font-semibold text-purple-600">-€170</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Benchmark Page -->
                <div v-if="portalPage === 'benchmark'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Benchmarking Service</h2>
                            <p class="text-gray-500">Compare your fleet with 1,200+ vehicles across EU</p>
                        </div>
                    </div>

                    <div class="glass rounded-2xl p-8 mb-8">
                        <div class="flex items-center justify-between mb-8">
                            <h3 class="text-xl font-semibold text-gray-800">Your Fleet vs Industry</h3>
                            <div class="flex gap-4">
                                <select v-model="selectedManufacturer" class="border rounded-lg px-4 py-2 text-sm">
                                    <option value="all">All Manufacturers</option>
                                    <option value="mercedes">Mercedes eCitaro</option>
                                    <option value="solaris">Solaris Urbino</option>
                                    <option value="byd">BYD K9</option>
                                </select>
                                <select v-model="selectedRegion" class="border rounded-lg px-4 py-2 text-sm">
                                    <option value="eu">EU Region</option>
                                    <option value="netherlands">Netherlands</option>
                                    <option value="germany">Germany</option>
                                </select>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div v-for="metric in benchmarkMetrics" :key="metric.label" class="flex items-center gap-6">
                                <div class="w-48">
                                    <p class="font-medium text-gray-800">{{ metric.label }}</p>
                                    <p class="text-sm text-gray-500">{{ metric.unit }}</p>
                                </div>
                                <div class="flex-1">
                                    <div class="relative h-8 bg-gray-100 rounded-full overflow-hidden">
                                        <!-- Industry Range -->
                                        <div class="absolute h-full bg-gray-200" :style="{left: metric.industryMin + '%', width: (metric.industryMax - metric.industryMin) + '%'}"></div>
                                        <!-- Your Value -->
                                        <div class="absolute top-0 h-full w-1 bg-blue-500" :style="{left: metric.yourValue + '%'}">
                                            <div class="absolute -top-6 left-1/2 -translate-x-1/2 bg-blue-500 text-white text-xs px-2 py-1 rounded whitespace-nowrap">
                                                {{ metric.yourDisplay }}
                                            </div>
                                        </div>
                                        <!-- Best 10% marker -->
                                        <div class="absolute top-0 h-full w-0.5 bg-green-500" :style="{left: metric.best10 + '%'}"></div>
                                    </div>
                                    <div class="flex justify-between mt-1 text-xs text-gray-400">
                                        <span>Worst</span>
                                        <span>Best 10%</span>
                                    </div>
                                </div>
                                <div class="w-32 text-right">
                                    <span :class="['text-sm font-medium', metric.status === 'good' ? 'text-green-600' : metric.status === 'average' ? 'text-yellow-600' : 'text-red-600']">
                                        {{ metric.status === 'good' ? 'Above Average' : metric.status === 'average' ? 'Average' : 'Below Average' }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass rounded-2xl p-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-lightbulb mr-2 text-yellow-500"></i>Optimization Recommendations
                        </h3>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-blue-50 rounded-xl p-4">
                                <div class="flex items-center gap-3 mb-2">
                                    <i class="fas fa-bolt text-blue-500"></i>
                                    <span class="font-medium text-gray-800">Charging Optimization</span>
                                </div>
                                <p class="text-sm text-gray-600">Shift 15% of charging to off-peak hours to save ~€8,500/month</p>
                            </div>
                            <div class="bg-green-50 rounded-xl p-4">
                                <div class="flex items-center gap-3 mb-2">
                                    <i class="fas fa-leaf text-green-500"></i>
                                    <span class="font-medium text-gray-800">Eco-Driving Training</span>
                                </div>
                                <p class="text-sm text-gray-600">Driver coaching could improve efficiency by 12%</p>
                            </div>
                            <div class="bg-purple-50 rounded-xl p-4">
                                <div class="flex items-center gap-3 mb-2">
                                    <i class="fas fa-wrench text-purple-500"></i>
                                    <span class="font-medium text-gray-800">Predictive Maintenance</span>
                                </div>
                                <p class="text-sm text-gray-600">3 vehicles showing early battery degradation signs</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports Page -->
                <div v-if="portalPage === 'reports'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Reports & Exports</h2>
                            <p class="text-gray-500">Generate and download fleet analytics reports</p>
                        </div>
                        <div class="flex gap-3">
                            <button class="bg-white border px-4 py-2 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50">
                                <i class="fas fa-clock mr-2"></i>Schedule Report
                            </button>
                            <button class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                                <i class="fas fa-plus mr-2"></i>New Report
                            </button>
                        </div>
                    </div>

                    <!-- Quick Export Cards -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-chart-line text-xl text-blue-500"></i>
                            </div>
                            <h4 class="font-semibold text-gray-800 mb-1">Performance Report</h4>
                            <p class="text-sm text-gray-500 mb-3">Fleet efficiency & KPIs</p>
                            <div class="flex gap-2">
                                <button @click="downloadPDFReport('performance')" class="px-3 py-1 bg-red-100 text-red-600 rounded text-xs font-medium hover:bg-red-200">
                                    <i class="fas fa-file-pdf mr-1"></i>PDF
                                </button>
                                <button class="px-3 py-1 bg-green-100 text-green-600 rounded text-xs font-medium hover:bg-green-200">
                                    <i class="fas fa-file-excel mr-1"></i>Excel
                                </button>
                            </div>
                        </div>
                        <div class="glass rounded-2xl p-6 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-battery-full text-xl text-green-500"></i>
                            </div>
                            <h4 class="font-semibold text-gray-800 mb-1">Battery Health</h4>
                            <p class="text-sm text-gray-500 mb-3">SoH analysis & predictions</p>
                            <div class="flex gap-2">
                                <button @click="downloadPDFReport('battery')" class="px-3 py-1 bg-red-100 text-red-600 rounded text-xs font-medium hover:bg-red-200">
                                    <i class="fas fa-file-pdf mr-1"></i>PDF
                                </button>
                                <button class="px-3 py-1 bg-green-100 text-green-600 rounded text-xs font-medium hover:bg-green-200">
                                    <i class="fas fa-file-excel mr-1"></i>Excel
                                </button>
                            </div>
                        </div>
                        <div class="glass rounded-2xl p-6 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-bolt text-xl text-yellow-500"></i>
                            </div>
                            <h4 class="font-semibold text-gray-800 mb-1">Energy Report</h4>
                            <p class="text-sm text-gray-500 mb-3">Consumption & costs</p>
                            <div class="flex gap-2">
                                <button @click="downloadPDFReport('energy')" class="px-3 py-1 bg-red-100 text-red-600 rounded text-xs font-medium hover:bg-red-200">
                                    <i class="fas fa-file-pdf mr-1"></i>PDF
                                </button>
                                <button class="px-3 py-1 bg-green-100 text-green-600 rounded text-xs font-medium hover:bg-green-200">
                                    <i class="fas fa-file-excel mr-1"></i>Excel
                                </button>
                            </div>
                        </div>
                        <div class="glass rounded-2xl p-6 cursor-pointer hover:shadow-lg transition-shadow">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-clipboard-check text-xl text-purple-500"></i>
                            </div>
                            <h4 class="font-semibold text-gray-800 mb-1">CVD Compliance</h4>
                            <p class="text-sm text-gray-500 mb-3">EU regulatory reports</p>
                            <div class="flex gap-2">
                                <button @click="downloadPDFReport('cvd')" class="px-3 py-1 bg-red-100 text-red-600 rounded text-xs font-medium hover:bg-red-200">
                                    <i class="fas fa-file-pdf mr-1"></i>PDF
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Reports Table -->
                    <div class="glass rounded-2xl p-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-history mr-2 text-gray-500"></i>Recent Reports
                        </h3>
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Report Name</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Type</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Generated</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Format</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Status</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="report in reports" :key="report.id" class="border-b hover:bg-gray-50">
                                    <td class="py-4">
                                        <div class="flex items-center gap-3">
                                            <div :class="['w-10 h-10 rounded-lg flex items-center justify-center', report.format === 'PDF' ? 'bg-red-100' : 'bg-green-100']">
                                                <i :class="['fas', report.format === 'PDF' ? 'fa-file-pdf text-red-500' : 'fa-file-excel text-green-500']"></i>
                                            </div>
                                            <span class="font-medium text-gray-800">{{ report.name }}</span>
                                        </div>
                                    </td>
                                    <td class="py-4">
                                        <span class="px-3 py-1 bg-gray-100 rounded-full text-xs font-medium text-gray-600">{{ report.type }}</span>
                                    </td>
                                    <td class="py-4 text-sm text-gray-600">{{ report.date }}</td>
                                    <td class="py-4">
                                        <span :class="['px-2 py-1 rounded text-xs font-medium', report.format === 'PDF' ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-600']">
                                            {{ report.format }}
                                        </span>
                                    </td>
                                    <td class="py-4">
                                        <span v-if="report.status === 'ready'" class="flex items-center gap-1 text-green-600 text-sm">
                                            <i class="fas fa-check-circle"></i> Ready
                                        </span>
                                        <span v-else class="flex items-center gap-1 text-yellow-600 text-sm">
                                            <i class="fas fa-spinner fa-spin"></i> Generating...
                                        </span>
                                    </td>
                                    <td class="py-4">
                                        <button v-if="report.status === 'ready'" @click="downloadPDFReport(report.reportType)" class="text-blue-500 hover:text-blue-700 mr-3" title="Download Report">
                                            <i class="fas fa-download"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600 mr-3" title="Share Report">
                                            <i class="fas fa-share-alt"></i>
                                        </button>
                                        <button class="text-gray-400 hover:text-gray-600" title="Delete Report">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Settings Page -->
                <div v-if="portalPage === 'settings'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Settings</h2>
                            <p class="text-gray-500">Manage integrations, API keys and preferences</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-6">
                        <!-- Integrations -->
                        <div class="col-span-2">
                            <div class="glass rounded-2xl p-6 mb-6">
                                <h3 class="font-semibold text-gray-800 mb-4">
                                    <i class="fas fa-plug mr-2 text-blue-500"></i>Fleet Management Integrations
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                        <div class="flex items-center gap-4">
                                            <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white font-bold">IN</div>
                                            <div>
                                                <p class="font-medium text-gray-800">INIT / HanseCom</p>
                                                <p class="text-sm text-gray-500">Fleet management system</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Connected</span>
                                            <button class="text-gray-400 hover:text-gray-600"><i class="fas fa-cog"></i></button>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                        <div class="flex items-center gap-4">
                                            <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center text-white font-bold">VC</div>
                                            <div>
                                                <p class="font-medium text-gray-800">ViriCiti</p>
                                                <p class="text-sm text-gray-500">Telematics provider</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Connected</span>
                                            <button class="text-gray-400 hover:text-gray-600"><i class="fas fa-cog"></i></button>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                        <div class="flex items-center gap-4">
                                            <div class="w-12 h-12 bg-gray-300 rounded-xl flex items-center justify-center text-gray-600 font-bold">OP</div>
                                            <div>
                                                <p class="font-medium text-gray-800">Optibus</p>
                                                <p class="text-sm text-gray-500">Scheduling system</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <button class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600">Connect</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="glass rounded-2xl p-6">
                                <h3 class="font-semibold text-gray-800 mb-4">
                                    <i class="fas fa-charging-station mr-2 text-green-500"></i>Charging Infrastructure (OCPP)
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                        <div class="flex items-center gap-4">
                                            <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center text-white">
                                                <i class="fas fa-charging-station"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-800">Depot A - Amsterdam</p>
                                                <p class="text-sm text-gray-500">8 chargers • OCPP 1.6J</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Online</span>
                                            <button class="text-gray-400 hover:text-gray-600"><i class="fas fa-cog"></i></button>
                                        </div>
                                    </div>
                                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                                        <div class="flex items-center gap-4">
                                            <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center text-white">
                                                <i class="fas fa-charging-station"></i>
                                            </div>
                                            <div>
                                                <p class="font-medium text-gray-800">Depot B - Rotterdam</p>
                                                <p class="text-sm text-gray-500">5 chargers • OCPP 2.0.1</p>
                                            </div>
                                        </div>
                                        <div class="flex items-center gap-3">
                                            <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Online</span>
                                            <button class="text-gray-400 hover:text-gray-600"><i class="fas fa-cog"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- API Keys & Notifications -->
                        <div>
                            <div class="glass rounded-2xl p-6 mb-6">
                                <h3 class="font-semibold text-gray-800 mb-4">
                                    <i class="fas fa-key mr-2 text-yellow-500"></i>API Keys
                                </h3>
                                <div class="space-y-3">
                                    <div class="p-3 bg-gray-50 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="text-sm font-medium text-gray-700">Production</span>
                                            <span class="text-xs text-green-600">Active</span>
                                        </div>
                                        <code class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">sk_live_****...8f3d</code>
                                    </div>
                                    <div class="p-3 bg-gray-50 rounded-lg">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="text-sm font-medium text-gray-700">Development</span>
                                            <span class="text-xs text-gray-400">Test mode</span>
                                        </div>
                                        <code class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">sk_test_****...2a1c</code>
                                    </div>
                                </div>
                                <button class="w-full mt-4 px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-50">
                                    <i class="fas fa-plus mr-2"></i>Generate New Key
                                </button>
                            </div>

                            <div class="glass rounded-2xl p-6">
                                <h3 class="font-semibold text-gray-800 mb-4">
                                    <i class="fas fa-bell mr-2 text-red-500"></i>Alert Settings
                                </h3>
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Low Battery Alerts</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:bg-blue-500 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Maintenance Reminders</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:bg-blue-500 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Charging Complete</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:bg-blue-500 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-700">Weekly Reports</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer">
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:bg-blue-500 after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Alerts Page -->
                <div v-if="portalPage === 'alerts'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Alerts & Notifications</h2>
                            <p class="text-gray-500">Monitor and manage fleet alerts</p>
                        </div>
                        <div class="flex gap-3">
                            <select class="bg-white border rounded-lg px-4 py-2 text-sm">
                                <option>All Types</option>
                                <option>Critical</option>
                                <option>Warning</option>
                                <option>Info</option>
                            </select>
                            <button class="bg-white border px-4 py-2 rounded-lg text-sm font-medium text-gray-600">
                                <i class="fas fa-check-double mr-2"></i>Mark All Read
                            </button>
                        </div>
                    </div>

                    <div class="glass rounded-2xl p-6">
                        <div class="space-y-4">
                            <div class="flex items-start gap-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-r-xl">
                                <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-exclamation-triangle text-red-500"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="font-semibold text-gray-800">Critical: Battery Temperature High</p>
                                            <p class="text-sm text-gray-600 mt-1">BUS-023 battery temperature exceeded 45°C threshold. Vehicle has been automatically limited to 80% power.</p>
                                        </div>
                                        <span class="text-xs text-gray-400">5 min ago</span>
                                    </div>
                                    <div class="flex gap-2 mt-3">
                                        <button class="px-3 py-1 bg-red-500 text-white rounded text-xs font-medium">Acknowledge</button>
                                        <button class="px-3 py-1 bg-white border rounded text-xs font-medium text-gray-600">View Details</button>
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-start gap-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-r-xl">
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-battery-quarter text-yellow-500"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="font-semibold text-gray-800">Warning: Low Battery Level</p>
                                            <p class="text-sm text-gray-600 mt-1">BUS-015 battery at 18%. Recommend returning to depot for charging.</p>
                                        </div>
                                        <span class="text-xs text-gray-400">12 min ago</span>
                                    </div>
                                    <div class="flex gap-2 mt-3">
                                        <button class="px-3 py-1 bg-yellow-500 text-white rounded text-xs font-medium">Schedule Charging</button>
                                        <button class="px-3 py-1 bg-white border rounded text-xs font-medium text-gray-600">Dismiss</button>
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-start gap-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-r-xl">
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-wrench text-yellow-500"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="font-semibold text-gray-800">Maintenance Due: Scheduled Service</p>
                                            <p class="text-sm text-gray-600 mt-1">BUS-008 is due for scheduled maintenance in 3 days (Dec 1, 2024).</p>
                                        </div>
                                        <span class="text-xs text-gray-400">1 hour ago</span>
                                    </div>
                                    <div class="flex gap-2 mt-3">
                                        <button class="px-3 py-1 bg-white border rounded text-xs font-medium text-gray-600">Schedule Now</button>
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-start gap-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-xl">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-bolt text-blue-500"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="font-semibold text-gray-800">Info: Charging Complete</p>
                                            <p class="text-sm text-gray-600 mt-1">BUS-031 has completed charging. Battery at 100%, ready for service.</p>
                                        </div>
                                        <span class="text-xs text-gray-400">2 hours ago</span>
                                    </div>
                                </div>
                            </div>

                            <div class="flex items-start gap-4 p-4 bg-green-50 border-l-4 border-green-500 rounded-r-xl">
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-check-circle text-green-500"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="font-semibold text-gray-800">Resolved: BUS-019 Back Online</p>
                                            <p class="text-sm text-gray-600 mt-1">Communication restored after 45 minutes offline. All systems nominal.</p>
                                        </div>
                                        <span class="text-xs text-gray-400">3 hours ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- ADMIN VIEW -->
        <div v-if="currentView === 'admin'" class="flex min-h-screen">
            <aside class="w-64 bg-purple-900 text-white flex flex-col">
                <div class="p-6 border-b border-purple-800">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-purple-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-shield-alt text-xl"></i>
                        </div>
                        <div>
                            <h1 class="font-bold text-lg">eBUS Admin</h1>
                            <p class="text-xs text-purple-300">Back Office</p>
                        </div>
                    </div>
                </div>

                <!-- View Switcher -->
                <div class="p-4 border-b border-purple-800">
                    <div class="flex flex-col gap-2">
                        <button
                            @click="currentView = 'portal'"
                            :class="['px-3 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2', currentView === 'portal' ? 'bg-blue-500 text-white' : 'text-purple-300 hover:bg-purple-800']"
                        >
                            <i class="fas fa-desktop"></i>Portal View
                        </button>
                        <button
                            @click="currentView = 'admin'"
                            :class="['px-3 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2', currentView === 'admin' ? 'bg-purple-500 text-white' : 'text-purple-300 hover:bg-purple-800']"
                        >
                            <i class="fas fa-cog"></i>Admin View
                        </button>
                        <button
                            @click="currentView = 'mobile'"
                            :class="['px-3 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2', currentView === 'mobile' ? 'bg-green-500 text-white' : 'text-purple-300 hover:bg-purple-800']"
                        >
                            <i class="fas fa-mobile-alt"></i>Mobile View
                        </button>
                    </div>
                </div>

                <nav class="flex-1 p-4">
                    <div class="space-y-1">
                        <a
                            v-for="item in adminMenu"
                            :key="item.id"
                            @click="adminPage = item.id"
                            :class="['sidebar-item flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer', adminPage === item.id ? 'bg-purple-800 text-purple-200' : 'text-purple-300']"
                        >
                            <i :class="[item.icon, 'w-5']"></i>
                            <span>{{ item.label }}</span>
                        </a>
                    </div>
                </nav>
            </aside>

            <main class="flex-1 p-8 bg-gray-50">
                <div v-if="adminPage === 'tenants'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Tenant Management</h2>
                            <p class="text-gray-500">Manage all customer accounts</p>
                        </div>
                        <button class="bg-purple-500 text-white px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-plus mr-2"></i>Add Tenant
                        </button>
                    </div>

                    <div class="glass rounded-2xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Tenant</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Country</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Plan</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Vehicles</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Status</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">MRR</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="tenant in tenants" :key="tenant.id" class="border-t hover:bg-gray-50">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <img :src="'https://ui-avatars.com/api/?name=' + tenant.name + '&background=8b5cf6&color=fff'" class="w-10 h-10 rounded-lg">
                                            <div>
                                                <p class="font-medium text-gray-800">{{ tenant.name }}</p>
                                                <p class="text-xs text-gray-500">{{ tenant.email }}</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="flex items-center gap-2">
                                            <span class="text-xl">{{ tenant.flag }}</span>
                                            {{ tenant.country }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span :class="['px-3 py-1 rounded-full text-xs font-medium', tenant.plan === 'Enterprise' ? 'bg-purple-100 text-purple-700' : 'bg-blue-100 text-blue-700']">
                                            {{ tenant.plan }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 font-medium text-gray-700">{{ tenant.vehicles }}</td>
                                    <td class="px-6 py-4">
                                        <span :class="['px-3 py-1 rounded-full text-xs font-medium', tenant.status === 'Active' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700']">
                                            {{ tenant.status }}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 font-semibold text-gray-800">{{ tenant.mrr }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div v-if="adminPage === 'system'">
                    <h2 class="text-2xl font-bold text-gray-800 mb-8">System Monitoring</h2>

                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full status-dot"></div>
                                <span class="text-sm text-gray-500">API Status</span>
                            </div>
                            <p class="text-2xl font-bold text-green-600">Healthy</p>
                            <p class="text-xs text-gray-400 mt-1">Response: 45ms avg</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center gap-3 mb-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full status-dot"></div>
                                <span class="text-sm text-gray-500">Database</span>
                            </div>
                            <p class="text-2xl font-bold text-green-600">Connected</p>
                            <p class="text-xs text-gray-400 mt-1">MongoDB Atlas M10</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center gap-3 mb-2">
                                <i class="fas fa-server text-gray-400"></i>
                                <span class="text-sm text-gray-500">CPU Usage</span>
                            </div>
                            <p class="text-2xl font-bold text-gray-800">23%</p>
                            <div class="w-full h-2 bg-gray-200 rounded-full mt-2">
                                <div class="h-full bg-blue-500 rounded-full" style="width: 23%"></div>
                            </div>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <div class="flex items-center gap-3 mb-2">
                                <i class="fas fa-memory text-gray-400"></i>
                                <span class="text-sm text-gray-500">Memory</span>
                            </div>
                            <p class="text-2xl font-bold text-gray-800">1.2 GB</p>
                            <p class="text-xs text-gray-400 mt-1">of 4 GB allocated</p>
                        </div>
                    </div>
                </div>

                <!-- Users Page -->
                <div v-if="adminPage === 'users'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">User Management</h2>
                            <p class="text-gray-500">Manage platform users and permissions</p>
                        </div>
                        <button class="bg-purple-500 text-white px-4 py-2 rounded-lg font-medium">
                            <i class="fas fa-user-plus mr-2"></i>Invite User
                        </button>
                    </div>

                    <div class="glass rounded-2xl overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">User</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Tenant</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Role</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Last Active</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Status</th>
                                    <th class="text-left px-6 py-4 text-sm font-semibold text-gray-600">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-t hover:bg-gray-50">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <img src="https://ui-avatars.com/api/?name=Jan+Bakker&background=8b5cf6&color=fff" class="w-10 h-10 rounded-full">
                                            <div>
                                                <p class="font-medium text-gray-800">Jan Bakker</p>
                                                <p class="text-xs text-gray-500">jan.bakker@keolis.nl</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">Keolis Nederland</td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium">Admin</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">2 hours ago</td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Active</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button class="text-gray-400 hover:text-gray-600 mr-2"><i class="fas fa-edit"></i></button>
                                        <button class="text-gray-400 hover:text-red-500"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr class="border-t hover:bg-gray-50">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <img src="https://ui-avatars.com/api/?name=Maria+Schmidt&background=3b82f6&color=fff" class="w-10 h-10 rounded-full">
                                            <div>
                                                <p class="font-medium text-gray-800">Maria Schmidt</p>
                                                <p class="text-xs text-gray-500">m.schmidt@bvg.de</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">BVG Berlin</td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium">Manager</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">1 day ago</td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Active</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button class="text-gray-400 hover:text-gray-600 mr-2"><i class="fas fa-edit"></i></button>
                                        <button class="text-gray-400 hover:text-red-500"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr class="border-t hover:bg-gray-50">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <img src="https://ui-avatars.com/api/?name=Paolo+Rossi&background=22c55e&color=fff" class="w-10 h-10 rounded-full">
                                            <div>
                                                <p class="font-medium text-gray-800">Paolo Rossi</p>
                                                <p class="text-xs text-gray-500">p.rossi@atm.it</p>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">ATM Milano</td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium">Viewer</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">5 days ago</td>
                                    <td class="px-6 py-4">
                                        <span class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium">Inactive</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <button class="text-gray-400 hover:text-gray-600 mr-2"><i class="fas fa-edit"></i></button>
                                        <button class="text-gray-400 hover:text-red-500"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Integrations Page -->
                <div v-if="adminPage === 'integrations'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Platform Integrations</h2>
                            <p class="text-gray-500">Manage third-party integrations and APIs</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-6">
                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-plug mr-2 text-blue-500"></i>Fleet Management Systems
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white font-bold">IN</div>
                                        <div>
                                            <p class="font-medium text-gray-800">INIT / HanseCom</p>
                                            <p class="text-xs text-gray-500">REST API v2.1</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Enabled</span>
                                </div>
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center text-white font-bold">SW</div>
                                        <div>
                                            <p class="font-medium text-gray-800">SWARCO</p>
                                            <p class="text-xs text-gray-500">REST API v1.8</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Enabled</span>
                                </div>
                                <div class="flex items-center justify-between p-4 border rounded-xl opacity-60">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-gray-400 rounded-xl flex items-center justify-center text-white font-bold">OP</div>
                                        <div>
                                            <p class="font-medium text-gray-800">Optibus</p>
                                            <p class="text-xs text-gray-500">Coming soon</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium">Beta</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-charging-station mr-2 text-green-500"></i>Charging Protocols
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center text-white">
                                            <i class="fas fa-bolt"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-800">OCPP 1.6J</p>
                                            <p class="text-xs text-gray-500">Open Charge Point Protocol</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Active</span>
                                </div>
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center text-white">
                                            <i class="fas fa-bolt"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-800">OCPP 2.0.1</p>
                                            <p class="text-xs text-gray-500">Latest protocol version</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Active</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-satellite-dish mr-2 text-orange-500"></i>Telematics Providers
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center text-white font-bold">VC</div>
                                        <div>
                                            <p class="font-medium text-gray-800">ViriCiti</p>
                                            <p class="text-xs text-gray-500">Real-time vehicle data</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Connected</span>
                                </div>
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center text-white font-bold">GX</div>
                                        <div>
                                            <p class="font-medium text-gray-800">Geotab</p>
                                            <p class="text-xs text-gray-500">Fleet telematics</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium">Pending</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-2xl p-6">
                            <h3 class="font-semibold text-gray-800 mb-4">
                                <i class="fas fa-cloud mr-2 text-purple-500"></i>Cloud Services
                            </h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-yellow-500 rounded-xl flex items-center justify-center text-white">
                                            <i class="fab fa-aws"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-800">AWS</p>
                                            <p class="text-xs text-gray-500">eu-west-1 region</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Primary</span>
                                </div>
                                <div class="flex items-center justify-between p-4 border rounded-xl">
                                    <div class="flex items-center gap-4">
                                        <div class="w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center text-white font-bold">MDB</div>
                                        <div>
                                            <p class="font-medium text-gray-800">MongoDB Atlas</p>
                                            <p class="text-xs text-gray-500">M10 Cluster</p>
                                        </div>
                                    </div>
                                    <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium">Connected</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Billing Page -->
                <div v-if="adminPage === 'billing'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Billing & Revenue</h2>
                            <p class="text-gray-500">Track revenue, invoices and subscription metrics</p>
                        </div>
                    </div>

                    <!-- Revenue KPIs -->
                    <div class="grid grid-cols-4 gap-6 mb-8">
                        <div class="glass rounded-2xl p-6">
                            <p class="text-sm text-gray-500 mb-2">Monthly Recurring Revenue</p>
                            <p class="text-3xl font-bold text-gray-800">€21,050</p>
                            <p class="text-sm text-green-500 mt-2"><i class="fas fa-arrow-up mr-1"></i>12% vs last month</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <p class="text-sm text-gray-500 mb-2">Annual Run Rate</p>
                            <p class="text-3xl font-bold text-gray-800">€252,600</p>
                            <p class="text-sm text-gray-400 mt-2">Based on current MRR</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <p class="text-sm text-gray-500 mb-2">Active Subscriptions</p>
                            <p class="text-3xl font-bold text-gray-800">4</p>
                            <p class="text-sm text-green-500 mt-2"><i class="fas fa-arrow-up mr-1"></i>1 new this month</p>
                        </div>
                        <div class="glass rounded-2xl p-6">
                            <p class="text-sm text-gray-500 mb-2">Avg. Revenue per Tenant</p>
                            <p class="text-3xl font-bold text-gray-800">€5,263</p>
                            <p class="text-sm text-gray-400 mt-2">Per month</p>
                        </div>
                    </div>

                    <!-- Invoices -->
                    <div class="glass rounded-2xl p-6">
                        <h3 class="font-semibold text-gray-800 mb-4">
                            <i class="fas fa-file-invoice-dollar mr-2 text-green-500"></i>Recent Invoices
                        </h3>
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Invoice</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Tenant</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Plan</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Amount</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Status</th>
                                    <th class="text-left py-3 text-sm font-semibold text-gray-600">Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="py-4 font-medium text-gray-800">INV-2024-0047</td>
                                    <td class="py-4 text-gray-600">Keolis Nederland</td>
                                    <td class="py-4"><span class="px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs">Enterprise</span></td>
                                    <td class="py-4 font-semibold text-gray-800">€12,300</td>
                                    <td class="py-4"><span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs">Paid</span></td>
                                    <td class="py-4 text-sm text-gray-500">Nov 1, 2024</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="py-4 font-medium text-gray-800">INV-2024-0048</td>
                                    <td class="py-4 text-gray-600">BVG Berlin</td>
                                    <td class="py-4"><span class="px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs">Enterprise</span></td>
                                    <td class="py-4 font-semibold text-gray-800">€5,350</td>
                                    <td class="py-4"><span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs">Paid</span></td>
                                    <td class="py-4 text-sm text-gray-500">Nov 1, 2024</td>
                                </tr>
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="py-4 font-medium text-gray-800">INV-2024-0049</td>
                                    <td class="py-4 text-gray-600">ATM Milano</td>
                                    <td class="py-4"><span class="px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs">Professional</span></td>
                                    <td class="py-4 font-semibold text-gray-800">€3,400</td>
                                    <td class="py-4"><span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded text-xs">Pending</span></td>
                                    <td class="py-4 text-sm text-gray-500">Nov 15, 2024</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Audit Logs Page -->
                <div v-if="adminPage === 'logs'">
                    <div class="flex justify-between items-center mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Audit Logs</h2>
                            <p class="text-gray-500">System activity and security events</p>
                        </div>
                        <div class="flex gap-3">
                            <select class="bg-white border rounded-lg px-4 py-2 text-sm">
                                <option>All Events</option>
                                <option>Authentication</option>
                                <option>Data Access</option>
                                <option>Configuration</option>
                            </select>
                            <button class="bg-white border px-4 py-2 rounded-lg text-sm font-medium text-gray-600">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>

                    <div class="glass rounded-2xl p-6">
                        <div class="space-y-3">
                            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-sign-in-alt text-green-500"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">User Login</p>
                                    <p class="text-xs text-gray-500">jan.bakker@keolis.nl logged in from Amsterdam, NL</p>
                                </div>
                                <span class="text-xs text-gray-400">2 min ago</span>
                            </div>
                            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-file-export text-blue-500"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Report Generated</p>
                                    <p class="text-xs text-gray-500">Monthly Fleet Performance report exported by jan.bakker@keolis.nl</p>
                                </div>
                                <span class="text-xs text-gray-400">15 min ago</span>
                            </div>
                            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-cog text-yellow-500"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Settings Changed</p>
                                    <p class="text-xs text-gray-500">Alert threshold updated for BVG Berlin tenant</p>
                                </div>
                                <span class="text-xs text-gray-400">1 hour ago</span>
                            </div>
                            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-key text-purple-500"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">API Key Generated</p>
                                    <p class="text-xs text-gray-500">New production API key created for ATM Milano</p>
                                </div>
                                <span class="text-xs text-gray-400">3 hours ago</span>
                            </div>
                            <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                                <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-user-times text-red-500"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Failed Login Attempt</p>
                                    <p class="text-xs text-gray-500">3 failed attempts from unknown IP (blocked)</p>
                                </div>
                                <span class="text-xs text-gray-400">5 hours ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- MOBILE VIEW -->
        <div v-if="currentView === 'mobile'" class="min-h-screen bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center p-8">
            <!-- View Switcher (Mobile only) -->
            <div class="fixed top-5 right-5 z-50 flex gap-2 bg-white rounded-xl shadow-lg p-2">
                <button
                    @click="currentView = 'portal'"
                    :class="['px-4 py-2 rounded-lg font-medium transition-all', currentView === 'portal' ? 'bg-blue-500 text-white' : 'text-gray-600 hover:bg-gray-100']"
                >
                    <i class="fas fa-desktop mr-2"></i>Portal
                </button>
                <button
                    @click="currentView = 'admin'"
                    :class="['px-4 py-2 rounded-lg font-medium transition-all', currentView === 'admin' ? 'bg-purple-500 text-white' : 'text-gray-600 hover:bg-gray-100']"
                >
                    <i class="fas fa-cog mr-2"></i>Admin
                </button>
                <button
                    @click="currentView = 'mobile'"
                    :class="['px-4 py-2 rounded-lg font-medium transition-all', currentView === 'mobile' ? 'bg-green-500 text-white' : 'text-gray-600 hover:bg-gray-100']"
                >
                    <i class="fas fa-mobile-alt mr-2"></i>Mobil
                </button>
            </div>

            <div class="mobile-frame bg-white shadow-2xl">
                <div class="mobile-notch"></div>

                <!-- Mobile Content -->
                <div class="h-full pt-8 flex flex-col">
                    <!-- Mobile Header -->
                    <div class="px-6 py-4 flex items-center justify-between">
                        <div>
                            <p class="text-xs text-gray-500">eBUS Analytics</p>
                            <p class="font-semibold text-gray-800">Fleet Manager</p>
                        </div>
                        <div class="relative">
                            <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-bell text-gray-600"></i>
                            </button>
                            <span class="notification-badge">5</span>
                        </div>
                    </div>

                    <!-- Mobile Content Area -->
                    <div class="flex-1 overflow-y-auto px-4 pb-20">
                        <!-- HOME PAGE -->
                        <div v-if="mobilePage === 'home'">
                            <!-- Performance Score Card -->
                            <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl p-5 text-white mb-4">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <p class="text-blue-100 text-sm">Overall Performance</p>
                                        <p class="text-3xl font-bold">82/100</p>
                                        <p class="text-blue-200 text-sm">Above Industry Benchmark</p>
                                    </div>
                                    <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-chart-line text-2xl"></i>
                                    </div>
                                </div>
                                <div class="flex gap-4">
                                    <div>
                                        <p class="text-blue-200 text-xs">Efficiency</p>
                                        <p class="text-lg font-semibold">+8%</p>
                                    </div>
                                    <div>
                                        <p class="text-blue-200 text-xs">Avg SoH</p>
                                        <p class="text-lg font-semibold">92%</p>
                                    </div>
                                    <div>
                                        <p class="text-blue-200 text-xs">Fleet</p>
                                        <p class="text-lg font-semibold">42 buses</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="grid grid-cols-4 gap-3 mb-6">
                                <button class="flex flex-col items-center gap-2 p-3 bg-white rounded-xl shadow-sm">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-chart-bar text-blue-600"></i>
                                    </div>
                                    <span class="text-xs text-gray-600">Analytics</span>
                                </button>
                                <button class="flex flex-col items-center gap-2 p-3 bg-white rounded-xl shadow-sm">
                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-battery-three-quarters text-green-600"></i>
                                    </div>
                                    <span class="text-xs text-gray-600">Battery</span>
                                </button>
                                <button class="flex flex-col items-center gap-2 p-3 bg-white rounded-xl shadow-sm">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-file-alt text-yellow-600"></i>
                                    </div>
                                    <span class="text-xs text-gray-600">Reports</span>
                                </button>
                                <button class="flex flex-col items-center gap-2 p-3 bg-white rounded-xl shadow-sm">
                                    <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-bell text-purple-600"></i>
                                    </div>
                                    <span class="text-xs text-gray-600">Alerts</span>
                                </button>
                            </div>

                            <!-- Alerts Section -->
                            <div class="mb-6">
                                <h3 class="font-semibold text-gray-800 mb-3">Analytics Alerts</h3>
                                <div class="space-y-2">
                                    <div class="bg-red-50 border-l-4 border-red-500 p-3 rounded-r-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-battery-quarter text-red-500"></i>
                                            <p class="text-sm font-medium text-gray-800">Battery Health Alert</p>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">BUS-004 at 78% SoH (7% below benchmark)</p>
                                    </div>
                                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-3 rounded-r-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-chart-line text-yellow-500"></i>
                                            <p class="text-sm font-medium text-gray-800">Efficiency Drop Detected</p>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Route 5 buses -12% efficiency this week</p>
                                    </div>
                                    <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded-r-lg">
                                        <div class="flex items-center gap-2">
                                            <i class="fas fa-info-circle text-blue-500"></i>
                                            <p class="text-sm font-medium text-gray-800">New Benchmark Available</p>
                                        </div>
                                        <p class="text-xs text-gray-500 mt-1">Q4 2024 data from 1,247 EU vehicles</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Key Metrics -->
                            <div>
                                <h3 class="font-semibold text-gray-800 mb-3">Key Metrics vs Benchmark</h3>
                                <div class="bg-white rounded-xl p-4 shadow-sm">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                                            <p class="text-2xl font-bold text-gray-800">1.18</p>
                                            <p class="text-xs text-gray-500">kWh/km</p>
                                            <p class="text-xs text-green-600 mt-1">+8% vs benchmark</p>
                                        </div>
                                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                                            <p class="text-2xl font-bold text-gray-800">92%</p>
                                            <p class="text-xs text-gray-500">Avg SoH</p>
                                            <p class="text-xs text-green-600 mt-1">+7% vs benchmark</p>
                                        </div>
                                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                                            <p class="text-2xl font-bold text-gray-800">88%</p>
                                            <p class="text-xs text-gray-500">Charging Eff.</p>
                                            <p class="text-xs text-green-600 mt-1">+6% vs benchmark</p>
                                        </div>
                                        <div class="text-center p-3 bg-gray-50 rounded-lg">
                                            <p class="text-2xl font-bold text-gray-800">94.8%</p>
                                            <p class="text-xs text-gray-500">Uptime</p>
                                            <p class="text-xs text-green-600 mt-1">+3% vs benchmark</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ANALYTICS PAGE -->
                        <div v-if="mobilePage === 'analytics'">
                            <h3 class="font-semibold text-gray-800 mb-4">Performance Trends</h3>

                            <!-- Efficiency Trend Card -->
                            <div class="bg-white rounded-2xl p-4 shadow-sm mb-4">
                                <div class="flex justify-between items-center mb-3">
                                    <span class="text-sm text-gray-600">Energy Efficiency (Last 7 days)</span>
                                    <span class="text-green-600 text-sm font-medium">+8% vs benchmark</span>
                                </div>
                                <div class="h-32 bg-gradient-to-t from-blue-50 to-transparent rounded-lg flex items-end justify-around px-2 pb-2">
                                    <div class="w-8 bg-blue-400 rounded-t" style="height: 75%"></div>
                                    <div class="w-8 bg-blue-400 rounded-t" style="height: 82%"></div>
                                    <div class="w-8 bg-blue-400 rounded-t" style="height: 68%"></div>
                                    <div class="w-8 bg-blue-500 rounded-t" style="height: 88%"></div>
                                    <div class="w-8 bg-blue-500 rounded-t" style="height: 92%"></div>
                                    <div class="w-8 bg-blue-500 rounded-t" style="height: 85%"></div>
                                    <div class="w-8 bg-blue-600 rounded-t" style="height: 94%"></div>
                                </div>
                                <div class="flex justify-between text-xs text-gray-400 mt-2 px-1">
                                    <span>Mon</span>
                                    <span>Tue</span>
                                    <span>Wed</span>
                                    <span>Thu</span>
                                    <span>Fri</span>
                                    <span>Sat</span>
                                    <span>Sun</span>
                                </div>
                            </div>

                            <!-- Key Metrics Grid -->
                            <div class="grid grid-cols-2 gap-3 mb-4">
                                <div class="bg-white rounded-xl p-4 shadow-sm">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fas fa-leaf text-green-500"></i>
                                        <span class="text-xs text-gray-500">Avg Efficiency</span>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-800">1.18</p>
                                    <p class="text-xs text-gray-500">kWh/km</p>
                                </div>
                                <div class="bg-white rounded-xl p-4 shadow-sm">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fas fa-battery-three-quarters text-blue-500"></i>
                                        <span class="text-xs text-gray-500">Fleet SoH</span>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-800">92%</p>
                                    <p class="text-xs text-gray-500">Average</p>
                                </div>
                                <div class="bg-white rounded-xl p-4 shadow-sm">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fas fa-bolt text-yellow-500"></i>
                                        <span class="text-xs text-gray-500">Charging Eff.</span>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-800">88%</p>
                                    <p class="text-xs text-gray-500">+6% vs bench</p>
                                </div>
                                <div class="bg-white rounded-xl p-4 shadow-sm">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fas fa-clock text-purple-500"></i>
                                        <span class="text-xs text-gray-500">Uptime</span>
                                    </div>
                                    <p class="text-2xl font-bold text-gray-800">94.8%</p>
                                    <p class="text-xs text-gray-500">+3% vs bench</p>
                                </div>
                            </div>

                            <!-- Top & Bottom Performers -->
                            <h4 class="font-semibold text-gray-800 mb-3">Fleet Highlights</h4>
                            <div class="space-y-3">
                                <div class="bg-green-50 rounded-xl p-3">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-sm font-medium text-gray-800">BUS-001</span>
                                        <span class="text-xs text-green-600 font-medium">Best Performer</span>
                                    </div>
                                    <p class="text-xs text-gray-500">1.08 kWh/km • 96% SoH</p>
                                </div>
                                <div class="bg-red-50 rounded-xl p-3">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-sm font-medium text-gray-800">BUS-004</span>
                                        <span class="text-xs text-red-600 font-medium">Needs Attention</span>
                                    </div>
                                    <p class="text-xs text-gray-500">78% SoH (7% below benchmark)</p>
                                </div>
                            </div>
                        </div>

                        <!-- BATTERY PAGE -->
                        <div v-if="mobilePage === 'battery'">
                            <h3 class="font-semibold text-gray-800 mb-4">Battery Health Overview</h3>

                            <!-- Fleet Average SoH -->
                            <div class="bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-5 text-white mb-4">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="text-green-100 text-sm">Fleet Average SoH</p>
                                        <p class="text-4xl font-bold">92%</p>
                                        <p class="text-green-200 text-sm mt-1">+7% vs benchmark</p>
                                    </div>
                                    <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
                                        <i class="fas fa-battery-three-quarters text-3xl"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- SoH Distribution -->
                            <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
                                <h4 class="font-medium text-gray-800 mb-3">Battery Health Distribution</h4>
                                <div class="space-y-3">
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600">95-100% (Excellent)</span>
                                            <span class="font-semibold">12 buses</span>
                                        </div>
                                        <div class="w-full h-2 bg-gray-100 rounded-full">
                                            <div class="h-full bg-green-500 rounded-full" style="width: 28%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600">90-95% (Good)</span>
                                            <span class="font-semibold">18 buses</span>
                                        </div>
                                        <div class="w-full h-2 bg-gray-100 rounded-full">
                                            <div class="h-full bg-green-400 rounded-full" style="width: 43%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600">85-90% (Fair)</span>
                                            <span class="font-semibold">9 buses</span>
                                        </div>
                                        <div class="w-full h-2 bg-gray-100 rounded-full">
                                            <div class="h-full bg-yellow-400 rounded-full" style="width: 21%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span class="text-gray-600"><80% (Attention)</span>
                                            <span class="font-semibold text-red-600">3 buses</span>
                                        </div>
                                        <div class="w-full h-2 bg-gray-100 rounded-full">
                                            <div class="h-full bg-red-500 rounded-full" style="width: 7%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Critical Vehicles -->
                            <h4 class="font-medium text-gray-800 mb-3">Requires Attention</h4>
                            <div class="space-y-3">
                                <div class="bg-red-50 rounded-xl p-3 border-l-4 border-red-500">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-sm font-medium text-gray-800">BUS-004</span>
                                        <span class="text-lg font-bold text-red-600">78%</span>
                                    </div>
                                    <p class="text-xs text-gray-500">1.2%/month degradation (benchmark: 0.7%)</p>
                                </div>
                                <div class="bg-yellow-50 rounded-xl p-3 border-l-4 border-yellow-500">
                                    <div class="flex items-center justify-between mb-1">
                                        <span class="text-sm font-medium text-gray-800">BUS-012</span>
                                        <span class="text-lg font-bold text-yellow-600">82%</span>
                                    </div>
                                    <p class="text-xs text-gray-500">Watch for further degradation</p>
                                </div>
                            </div>
                        </div>

                        <!-- ALERTS PAGE -->
                        <div v-if="mobilePage === 'alerts'">
                            <h3 class="font-semibold text-gray-800 mb-4">Active Alerts (5)</h3>

                            <div class="space-y-3">
                                <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-red-500">
                                    <div class="flex items-start gap-3">
                                        <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                            <i class="fas fa-battery-quarter text-red-500"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800 mb-1">Critical SoH Alert</p>
                                            <p class="text-sm text-gray-600 mb-2">BUS-004 at 78% SoH, 7% below benchmark</p>
                                            <div class="flex items-center justify-between">
                                                <span class="text-xs text-gray-400">2 hours ago</span>
                                                <button class="text-xs text-blue-500 font-medium">View Details →</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-yellow-500">
                                    <div class="flex items-start gap-3">
                                        <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                            <i class="fas fa-chart-line text-yellow-500"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800 mb-1">Efficiency Drop Detected</p>
                                            <p class="text-sm text-gray-600 mb-2">Route 5 buses showing -12% efficiency drop this week</p>
                                            <div class="flex items-center justify-between">
                                                <span class="text-xs text-gray-400">5 hours ago</span>
                                                <button class="text-xs text-blue-500 font-medium">Investigate →</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-blue-500">
                                    <div class="flex items-start gap-3">
                                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                            <i class="fas fa-info-circle text-blue-500"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800 mb-1">New Benchmark Data Available</p>
                                            <p class="text-sm text-gray-600 mb-2">Q4 2024 data from 1,247 EU vehicles</p>
                                            <div class="flex items-center justify-between">
                                                <span class="text-xs text-gray-400">1 day ago</span>
                                                <button class="text-xs text-blue-500 font-medium">View Report →</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-green-500">
                                    <div class="flex items-start gap-3">
                                        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                            <i class="fas fa-trophy text-green-500"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800 mb-1">Performance Milestone</p>
                                            <p class="text-sm text-gray-600 mb-2">Fleet achieved +10% efficiency vs benchmark for 30 consecutive days</p>
                                            <div class="flex items-center justify-between">
                                                <span class="text-xs text-gray-400">2 days ago</span>
                                                <button class="text-xs text-blue-500 font-medium">Celebrate →</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-purple-500">
                                    <div class="flex items-start gap-3">
                                        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0">
                                            <i class="fas fa-wrench text-purple-500"></i>
                                        </div>
                                        <div class="flex-1">
                                            <p class="font-medium text-gray-800 mb-1">Predictive Maintenance Alert</p>
                                            <p class="text-sm text-gray-600 mb-2">BUS-023 may require battery inspection in 14-21 days</p>
                                            <div class="flex items-center justify-between">
                                                <span class="text-xs text-gray-400">3 days ago</span>
                                                <button class="text-xs text-blue-500 font-medium">Schedule →</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mobile Bottom Navigation -->
                    <div class="absolute bottom-0 left-0 right-0 bg-white border-t px-6 py-3">
                        <div class="flex justify-around">
                            <button @click="mobilePage = 'home'" :class="['flex flex-col items-center gap-1', mobilePage === 'home' ? 'text-blue-500' : 'text-gray-400']">
                                <i class="fas fa-home text-xl"></i>
                                <span class="text-xs">Home</span>
                            </button>
                            <button @click="mobilePage = 'analytics'" :class="['flex flex-col items-center gap-1', mobilePage === 'analytics' ? 'text-blue-500' : 'text-gray-400']">
                                <i class="fas fa-chart-line text-xl"></i>
                                <span class="text-xs">Analytics</span>
                            </button>
                            <button @click="mobilePage = 'battery'" :class="['flex flex-col items-center gap-1', mobilePage === 'battery' ? 'text-blue-500' : 'text-gray-400']">
                                <i class="fas fa-battery-three-quarters text-xl"></i>
                                <span class="text-xs">Battery</span>
                            </button>
                            <button @click="mobilePage = 'alerts'" :class="['flex flex-col items-center gap-1', mobilePage === 'alerts' ? 'text-blue-500' : 'text-gray-400']">
                                <i class="fas fa-bell text-xl"></i>
                                <span class="text-xs">Alerts</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Description -->
            <div class="ml-12 max-w-sm">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Mobile App</h2>
                <p class="text-gray-600 mb-6">
                    Flotta menedzserek számára készült mobil alkalmazás, amely valós idejű analytics
                    dashboardot, benchmark összehasonlításokat és riasztásokat biztosít útközben is.
                </p>
                <div class="space-y-3">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-check-circle text-green-500"></i>
                        <span class="text-gray-700">Real-time benchmark dashboard</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <i class="fas fa-check-circle text-green-500"></i>
                        <span class="text-gray-700">Battery health monitoring</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <i class="fas fa-check-circle text-green-500"></i>
                        <span class="text-gray-700">Push notifications analytics alerts</span>
                    </div>
                    <div class="flex items-center gap-3">
                        <i class="fas fa-check-circle text-green-500"></i>
                        <span class="text-gray-700">Performance insights AI-powered</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted, watch } = Vue;

        createApp({
            setup() {
                const currentView = ref('portal');
                const portalPage = ref('dashboard');
                const adminPage = ref('tenants');
                const mobilePage = ref('home');

                const portalMenu = [
                    { id: 'dashboard', label: 'Analytics Overview', icon: 'fas fa-chart-line' },
                    { id: 'benchmark', label: 'Benchmarking', icon: 'fas fa-chart-bar' },
                    { id: 'performance', label: 'Performance Analysis', icon: 'fas fa-tachometer-alt' },
                    { id: 'insights', label: 'Fleet Insights', icon: 'fas fa-lightbulb' },
                    { id: 'battery', label: 'Battery Health', icon: 'fas fa-battery-three-quarters' },
                    { id: 'charging', label: 'Charging Analysis', icon: 'fas fa-charging-station' },
                    { id: 'alerts', label: 'Alerts', icon: 'fas fa-bell', badge: '3' },
                    { id: 'reports', label: 'Reports', icon: 'fas fa-file-alt' },
                    { id: 'datasources', label: 'Data Sources', icon: 'fas fa-plug' },
                ];

                const adminMenu = [
                    { id: 'tenants', label: 'Tenants', icon: 'fas fa-building' },
                    { id: 'users', label: 'Users', icon: 'fas fa-users' },
                    { id: 'datasources', label: 'Data Sources', icon: 'fas fa-database' },
                    { id: 'aiconfig', label: 'AI Configuration', icon: 'fas fa-robot' },
                    { id: 'integrations', label: 'Integrations', icon: 'fas fa-plug' },
                    { id: 'billing', label: 'Billing', icon: 'fas fa-credit-card' },
                    { id: 'system', label: 'System', icon: 'fas fa-server' },
                    { id: 'logs', label: 'Audit Logs', icon: 'fas fa-history' },
                ];

                const kpis = [
                    { label: 'Active Vehicles', value: '42/50', icon: 'fas fa-bus', bgColor: 'bg-blue-100', iconColor: 'text-blue-500', trend: 2 },
                    { label: 'Avg. Battery Level', value: '78%', icon: 'fas fa-battery-three-quarters', bgColor: 'bg-green-100', iconColor: 'text-green-500', trend: 5 },
                    { label: 'Daily Distance', value: '8,542 km', icon: 'fas fa-road', bgColor: 'bg-purple-100', iconColor: 'text-purple-500', trend: -3 },
                    { label: 'Energy Efficiency', value: '1.18 kWh/km', icon: 'fas fa-leaf', bgColor: 'bg-yellow-100', iconColor: 'text-yellow-500', trend: 8 },
                ];

                const alerts = [
                    { id: 1, type: 'critical', icon: 'fas fa-exclamation-triangle', title: 'Low Battery Critical', vehicle: 'BUS-023', time: '5 min ago' },
                    { id: 2, type: 'warning', icon: 'fas fa-thermometer-full', title: 'High Temperature', vehicle: 'BUS-015', time: '12 min ago' },
                    { id: 3, type: 'warning', icon: 'fas fa-wrench', title: 'Maintenance Due', vehicle: 'BUS-008', time: '1 hour ago' },
                    { id: 4, type: 'info', icon: 'fas fa-info-circle', title: 'Charging Complete', vehicle: 'BUS-031', time: '2 hours ago' },
                ];

                const vehicles = [
                    { id: 'BUS-001', model: 'Mercedes eCitaro', status: 'Active', battery: 85, soh: 94, location: 'Route 12 - Amsterdam', efficiency: '1.12' },
                    { id: 'BUS-002', model: 'Mercedes eCitaro', status: 'Charging', battery: 45, soh: 91, location: 'Depot A - Charging', efficiency: '1.18' },
                    { id: 'BUS-003', model: 'Solaris Urbino 12', status: 'Active', battery: 72, soh: 89, location: 'Route 5 - Rotterdam', efficiency: '1.21' },
                    { id: 'BUS-004', model: 'BYD K9', status: 'Maintenance', battery: 60, soh: 78, location: 'Depot B - Workshop', efficiency: '1.35' },
                    { id: 'BUS-005', model: 'Mercedes eCitaro', status: 'Active', battery: 92, soh: 96, location: 'Route 8 - Utrecht', efficiency: '1.08' },
                    { id: 'BUS-006', model: 'Solaris Urbino 18', status: 'Active', battery: 68, soh: 92, location: 'Route 3 - Den Haag', efficiency: '1.25' },
                ];

                const benchmarks = [
                    { label: 'Efficiency', value: 82, industryAvg: 74, color: '#22c55e' },
                    { label: 'Uptime', value: 95, industryAvg: 89, color: '#3b82f6' },
                    { label: 'Battery Health', value: 91, industryAvg: 85, color: '#8b5cf6' },
                    { label: 'Eco Score', value: 88, industryAvg: 76, color: '#f59e0b' },
                ];

                // Benchmark filter states
                const selectedManufacturer = ref('all');
                const selectedRegion = ref('eu');

                // Benchmark data sets for different filters
                const benchmarkData = {
                    'all-eu': [
                        { label: 'Energy Efficiency', unit: 'kWh/km', yourValue: 75, yourDisplay: '1.18', industryMin: 20, industryMax: 80, best10: 85, status: 'good' },
                        { label: 'Battery Degradation', unit: '% / year', yourValue: 70, yourDisplay: '0.65%', industryMin: 25, industryMax: 75, best10: 80, status: 'good' },
                        { label: 'Charging Efficiency', unit: '%', yourValue: 55, yourDisplay: '88%', industryMin: 30, industryMax: 70, best10: 85, status: 'average' },
                        { label: 'Fleet Utilization', unit: 'hours/day', yourValue: 80, yourDisplay: '16.2h', industryMin: 20, industryMax: 70, best10: 90, status: 'good' },
                    ],
                    'mercedes-eu': [
                        { label: 'Energy Efficiency', unit: 'kWh/km', yourValue: 72, yourDisplay: '1.18', industryMin: 25, industryMax: 75, best10: 82, status: 'good' },
                        { label: 'Battery Degradation', unit: '% / year', yourValue: 68, yourDisplay: '0.65%', industryMin: 30, industryMax: 70, best10: 78, status: 'good' },
                        { label: 'Charging Efficiency', unit: '%', yourValue: 58, yourDisplay: '88%', industryMin: 35, industryMax: 75, best10: 88, status: 'average' },
                        { label: 'Fleet Utilization', unit: 'hours/day', yourValue: 78, yourDisplay: '16.2h', industryMin: 25, industryMax: 68, best10: 85, status: 'good' },
                    ],
                    'solaris-eu': [
                        { label: 'Energy Efficiency', unit: 'kWh/km', yourValue: 78, yourDisplay: '1.18', industryMin: 22, industryMax: 82, best10: 87, status: 'good' },
                        { label: 'Battery Degradation', unit: '% / year', yourValue: 73, yourDisplay: '0.65%', industryMin: 28, industryMax: 78, best10: 83, status: 'good' },
                        { label: 'Charging Efficiency', unit: '%', yourValue: 52, yourDisplay: '88%', industryMin: 28, industryMax: 68, best10: 83, status: 'average' },
                        { label: 'Fleet Utilization', unit: 'hours/day', yourValue: 82, yourDisplay: '16.2h', industryMin: 22, industryMax: 75, best10: 92, status: 'good' },
                    ],
                    'byd-eu': [
                        { label: 'Energy Efficiency', unit: 'kWh/km', yourValue: 68, yourDisplay: '1.18', industryMin: 18, industryMax: 73, best10: 80, status: 'good' },
                        { label: 'Battery Degradation', unit: '% / year', yourValue: 65, yourDisplay: '0.65%', industryMin: 22, industryMax: 70, best10: 75, status: 'good' },
                        { label: 'Charging Efficiency', unit: '%', yourValue: 60, yourDisplay: '88%', industryMin: 32, industryMax: 72, best10: 87, status: 'average' },
                        { label: 'Fleet Utilization', unit: 'hours/day', yourValue: 75, yourDisplay: '16.2h', industryMin: 18, industryMax: 70, best10: 88, status: 'good' },
                    ],
                    'all-netherlands': [
                        { label: 'Energy Efficiency', unit: 'kWh/km', yourValue: 73, yourDisplay: '1.18', industryMin: 22, industryMax: 78, best10: 83, status: 'good' },
                        { label: 'Battery Degradation', unit: '% / year', yourValue: 68, yourDisplay: '0.65%', industryMin: 27, industryMax: 73, best10: 78, status: 'good' },
                        { label: 'Charging Efficiency', unit: '%', yourValue: 57, yourDisplay: '88%', industryMin: 32, industryMax: 72, best10: 87, status: 'average' },
                        { label: 'Fleet Utilization', unit: 'hours/day', yourValue: 77, yourDisplay: '16.2h', industryMin: 22, industryMax: 71, best10: 87, status: 'good' },
                    ],
                    'all-germany': [
                        { label: 'Energy Efficiency', unit: 'kWh/km', yourValue: 77, yourDisplay: '1.18', industryMin: 18, industryMax: 82, best10: 87, status: 'good' },
                        { label: 'Battery Degradation', unit: '% / year', yourValue: 72, yourDisplay: '0.65%', industryMin: 23, industryMax: 77, best10: 82, status: 'good' },
                        { label: 'Charging Efficiency', unit: '%', yourValue: 53, yourDisplay: '88%', industryMin: 28, industryMax: 68, best10: 83, status: 'average' },
                        { label: 'Fleet Utilization', unit: 'hours/day', yourValue: 82, yourDisplay: '16.2h', industryMin: 18, industryMax: 75, best10: 93, status: 'good' },
                    ],
                };

                const benchmarkMetrics = computed(() => {
                    const key = `${selectedManufacturer.value}-${selectedRegion.value}`;
                    return benchmarkData[key] || benchmarkData['all-eu'];
                });

                const tenants = [
                    { id: 1, name: 'Keolis Nederland', email: 'admin@keolis.nl', flag: '🇳🇱', country: 'Netherlands', plan: 'Enterprise', vehicles: 246, status: 'Active', mrr: '€12,300' },
                    { id: 2, name: 'BVG Berlin', email: 'fleet@bvg.de', flag: '🇩🇪', country: 'Germany', plan: 'Enterprise', vehicles: 107, status: 'Active', mrr: '€5,350' },
                    { id: 3, name: 'ATM Milano', email: 'ops@atm.it', flag: '🇮🇹', country: 'Italy', plan: 'Professional', vehicles: 85, status: 'Active', mrr: '€3,400' },
                    { id: 4, name: 'RATP Paris', email: 'tech@ratp.fr', flag: '🇫🇷', country: 'France', plan: 'Enterprise', vehicles: 156, status: 'Trial', mrr: '€0' },
                ];

                const chargingStations = [
                    { id: 1, name: 'Charger A-01', type: 'DC Fast 150kW', status: 'charging', maxPower: 150, vehicle: 'BUS-023', progress: 67, powerNow: 142, timeRemaining: 25 },
                    { id: 2, name: 'Charger A-02', type: 'DC Fast 150kW', status: 'charging', maxPower: 150, vehicle: 'BUS-008', progress: 34, powerNow: 148, timeRemaining: 52 },
                    { id: 3, name: 'Charger A-03', type: 'DC Fast 150kW', status: 'available', maxPower: 150 },
                    { id: 4, name: 'Charger B-01', type: 'DC Fast 300kW', status: 'charging', maxPower: 300, vehicle: 'BUS-015', progress: 89, powerNow: 95, timeRemaining: 8 },
                    { id: 5, name: 'Charger B-02', type: 'DC Fast 300kW', status: 'available', maxPower: 300 },
                    { id: 6, name: 'Charger C-01', type: 'AC Overnight 22kW', status: 'offline', maxPower: 22 },
                ];

                const chargingSchedule = [
                    { id: 1, time: '22:00', duration: '6h', vehicle: 'BUS-001', station: 'Charger C-01', targetSoc: 100, tariff: 'off-peak' },
                    { id: 2, time: '22:30', duration: '5h', vehicle: 'BUS-003', station: 'Charger C-02', targetSoc: 95, tariff: 'off-peak' },
                    { id: 3, time: '14:00', duration: '45m', vehicle: 'BUS-012', station: 'Charger B-01', targetSoc: 80, tariff: 'peak' },
                    { id: 4, time: '23:00', duration: '7h', vehicle: 'BUS-006', station: 'Charger C-03', targetSoc: 100, tariff: 'off-peak' },
                ];

                const reports = [
                    { id: 1, name: 'Monthly Fleet Performance', type: 'Performance', reportType: 'performance', date: '2024-11-01', status: 'ready', format: 'PDF' },
                    { id: 2, name: 'Energy Consumption Analysis', type: 'Energy', reportType: 'energy', date: '2024-11-15', status: 'ready', format: 'Excel' },
                    { id: 3, name: 'Battery Health Report Q4', type: 'Battery', reportType: 'battery', date: '2024-10-31', status: 'ready', format: 'PDF' },
                    { id: 4, name: 'CVD Compliance Report', type: 'Compliance', reportType: 'cvd', date: '2024-11-20', status: 'generating', format: 'PDF' },
                    { id: 5, name: 'Cost Optimization Summary', type: 'Financial', reportType: 'energy', date: '2024-11-18', status: 'ready', format: 'Excel' },
                ];

                // Mock Data Sources
                const dataSources = [
                    // OEM Telemetry
                    { id: 1, name: 'Mercedes eSConnect', category: 'OEM Telemetry', status: 'connected', lastSync: '2 min ago', dataQuality: 98, vehiclesConnected: 24, aiQueriesUsed: 247, icon: 'fas fa-car' },
                    { id: 2, name: 'Solaris eSConnect', category: 'OEM Telemetry', status: 'connected', lastSync: '5 min ago', dataQuality: 95, vehiclesConnected: 12, aiQueriesUsed: 183, icon: 'fas fa-car' },
                    { id: 3, name: 'MAN Now API', category: 'OEM Telemetry', status: 'pending', lastSync: 'pending auth', dataQuality: 0, vehiclesConnected: 0, aiQueriesUsed: 0, icon: 'fas fa-car' },
                    { id: 4, name: 'BYD Fleet', category: 'OEM Telemetry', status: 'connected', lastSync: '8 min ago', dataQuality: 92, vehiclesConnected: 6, aiQueriesUsed: 95, icon: 'fas fa-car' },

                    // FMS Providers
                    { id: 5, name: 'ViriCiti', category: 'FMS Providers', status: 'connected', lastSync: '1 min ago', dataQuality: 99, vehiclesConnected: 42, aiQueriesUsed: 512, icon: 'fas fa-chart-line' },
                    { id: 6, name: 'INIT/HanseCom', category: 'FMS Providers', status: 'connected', lastSync: '3 min ago', dataQuality: 97, vehiclesConnected: 42, aiQueriesUsed: 421, icon: 'fas fa-chart-line' },
                    { id: 7, name: 'Optibus', category: 'FMS Providers', status: 'failed', lastSync: '2 days ago', dataQuality: 45, vehiclesConnected: 0, aiQueriesUsed: 23, icon: 'fas fa-chart-line' },
                    { id: 8, name: 'SWARCO', category: 'FMS Providers', status: 'connected', lastSync: '12 min ago', dataQuality: 94, vehiclesConnected: 42, aiQueriesUsed: 287, icon: 'fas fa-chart-line' },

                    // External APIs
                    { id: 9, name: 'OpenWeatherMap', category: 'External APIs', status: 'connected', lastSync: '10 min ago', dataQuality: 100, vehiclesConnected: null, aiQueriesUsed: 156, icon: 'fas fa-cloud-sun' },
                    { id: 10, name: 'EU CVD Compliance DB', category: 'External APIs', status: 'connected', lastSync: '1 day ago', dataQuality: 100, vehiclesConnected: null, aiQueriesUsed: 89, icon: 'fas fa-balance-scale' },
                    { id: 11, name: 'Market Intelligence API', category: 'External APIs', status: 'connected', lastSync: '6 hours ago', dataQuality: 88, vehiclesConnected: null, aiQueriesUsed: 342, icon: 'fas fa-chart-bar' },

                    // Charging Networks
                    { id: 12, name: 'ChargePoint Network', category: 'Charging Networks', status: 'connected', lastSync: '4 min ago', dataQuality: 96, vehiclesConnected: null, aiQueriesUsed: 178, icon: 'fas fa-charging-station' },
                    { id: 13, name: 'ABB Chargers', category: 'Charging Networks', status: 'connected', lastSync: '7 min ago', dataQuality: 93, vehiclesConnected: null, aiQueriesUsed: 134, icon: 'fas fa-charging-station' },
                    { id: 14, name: 'Heliox OCPP', category: 'Charging Networks', status: 'connected', lastSync: '15 min ago', dataQuality: 91, vehiclesConnected: null, aiQueriesUsed: 92, icon: 'fas fa-charging-station' },
                ];

                const selectedDataSource = ref(null);

                let map = null;
                let efficiencyChart = null;
                let socChart = null;

                const getStatusClass = (status) => {
                    const classes = {
                        'Active': 'bg-green-100 text-green-700',
                        'Charging': 'bg-blue-100 text-blue-700',
                        'Maintenance': 'bg-yellow-100 text-yellow-700',
                        'Inactive': 'bg-gray-100 text-gray-700',
                    };
                    return classes[status] || 'bg-gray-100 text-gray-700';
                };

                const getStatusIcon = (status) => {
                    const icons = {
                        'Active': 'fas fa-circle',
                        'Charging': 'fas fa-bolt',
                        'Maintenance': 'fas fa-wrench',
                        'Inactive': 'fas fa-pause',
                    };
                    return icons[status] || 'fas fa-circle';
                };

                const getBatteryColor = (level) => {
                    if (level > 60) return 'bg-green-500';
                    if (level > 30) return 'bg-yellow-500';
                    return 'bg-red-500';
                };

                const downloadPDFReport = (reportType) => {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();

                    // Report data based on type
                    const reportData = {
                        performance: {
                            title: 'Fleet Performance Report',
                            data: [
                                ['Metric', 'Your Fleet', 'Benchmark', 'Difference'],
                                ['Energy Efficiency (kWh/km)', '1.18', '1.28', '+8% better'],
                                ['Battery Health (SoH)', '92%', '85%', '+7% better'],
                                ['Charging Efficiency', '88%', '82%', '+6% better'],
                                ['Fleet Utilization (hrs/day)', '16.2', '14.8', '+9% better'],
                                ['Overall Performance Score', '82/100', '74/100', '+11% better']
                            ]
                        },
                        battery: {
                            title: 'Battery Health Analysis Report',
                            data: [
                                ['Vehicle', 'Model', 'SoH %', 'Degradation/Year', 'Status'],
                                ['BUS-001', 'Mercedes eCitaro', '95%', '0.6%', 'Excellent'],
                                ['BUS-002', 'Solaris Urbino 12E', '93%', '0.7%', 'Good'],
                                ['BUS-003', 'BYD K9', '91%', '0.8%', 'Good'],
                                ['BUS-004', 'Mercedes eCitaro', '78%', '1.2%', 'Attention Needed'],
                                ['Average', '-', '92%', '0.65%', '-']
                            ]
                        },
                        energy: {
                            title: 'Energy Consumption & Cost Report',
                            data: [
                                ['Period', 'Total kWh', 'Avg kWh/km', 'Total Cost (€)', 'Avg €/kWh'],
                                ['Week 1', '15,420', '1.22', '2,775', '0.18'],
                                ['Week 2', '15,890', '1.19', '2,860', '0.18'],
                                ['Week 3', '16,120', '1.21', '2,902', '0.18'],
                                ['Week 4', '15,780', '1.18', '2,840', '0.18'],
                                ['Total/Average', '63,210', '1.20', '11,377', '0.18']
                            ]
                        },
                        cvd: {
                            title: 'EU Clean Vehicles Directive Compliance Report',
                            data: [
                                ['Metric', 'Current', 'Target 2025', 'Compliance'],
                                ['Zero-Emission Buses', '42', '24 minimum', 'Compliant ✓'],
                                ['ZE % of Total Fleet', '100%', '45%', 'Exceeds ✓'],
                                ['New Purchases (ZE)', '42', '24', 'Compliant ✓'],
                                ['CVD Compliance Status', 'Full', 'Required', 'PASS ✓']
                            ]
                        }
                    };

                    const report = reportData[reportType];
                    const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

                    // Header
                    doc.setFontSize(20);
                    doc.setTextColor(37, 99, 235); // Blue
                    doc.text('eBUS Analytics Platform', 20, 20);

                    doc.setFontSize(16);
                    doc.setTextColor(0, 0, 0);
                    doc.text(report.title, 20, 35);

                    doc.setFontSize(10);
                    doc.setTextColor(100, 100, 100);
                    doc.text('Generated: ' + today, 20, 45);
                    doc.text('Operator: Keolis Nederland', 20, 52);
                    doc.text('Fleet Size: 42 electric buses', 20, 59);

                    // Line separator
                    doc.setDrawColor(200, 200, 200);
                    doc.line(20, 65, 190, 65);

                    // Table
                    let yPos = 75;
                    doc.setFontSize(9);

                    report.data.forEach((row, index) => {
                        let xPos = 20;
                        const cellWidth = 35;

                        if (index === 0) {
                            // Header row
                            doc.setFillColor(59, 130, 246);
                            doc.rect(20, yPos - 5, 170, 8, 'F');
                            doc.setTextColor(255, 255, 255);
                            doc.setFont(undefined, 'bold');
                        } else {
                            doc.setTextColor(0, 0, 0);
                            doc.setFont(undefined, 'normal');

                            // Alternate row background
                            if (index % 2 === 0) {
                                doc.setFillColor(249, 250, 251);
                                doc.rect(20, yPos - 5, 170, 8, 'F');
                            }
                        }

                        row.forEach((cell, cellIndex) => {
                            doc.text(cell.toString(), xPos + 2, yPos);
                            xPos += cellWidth;
                        });

                        yPos += 10;
                    });

                    // Footer
                    yPos += 10;
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text('Benchmark data based on 1,247+ e-buses across EU (Q4 2024)', 20, yPos);
                    doc.text('Data sources: ViriCiti, INIT', 20, yPos + 5);

                    // Bottom line
                    doc.setDrawColor(200, 200, 200);
                    doc.line(20, 280, 190, 280);
                    doc.setFontSize(7);
                    doc.text('eBUS Analytics Platform - Confidential Report', 20, 285);
                    doc.text('https://portal.ebus-analytics.eu', 150, 285);

                    // Download
                    const filename = `ebus-${reportType}-report-${new Date().toISOString().split('T')[0]}.pdf`;
                    doc.save(filename);
                };

                const initMap = () => {
                    if (map) map.remove();

                    map = L.map('map').setView([52.3676, 4.9041], 11);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '© OpenStreetMap'
                    }).addTo(map);

                    // Add vehicle markers
                    const busIcon = L.divIcon({
                        html: '<div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center shadow-lg"><i class="fas fa-bus text-white text-sm"></i></div>',
                        className: '',
                        iconSize: [32, 32],
                    });

                    const locations = [
                        [52.3702, 4.8952],
                        [52.3792, 4.8994],
                        [52.3547, 4.9042],
                        [52.3667, 4.9200],
                        [52.3850, 4.8800],
                    ];

                    locations.forEach((loc, i) => {
                        L.marker(loc, { icon: busIcon })
                            .addTo(map)
                            .bindPopup(`<b>BUS-00${i + 1}</b><br>Battery: ${75 + i * 5}%<br>Status: Active`);
                    });
                };

                const initCharts = () => {
                    // Efficiency Trend vs. Benchmark Chart
                    const effCtx = document.getElementById('efficiencyChart');
                    if (effCtx) {
                        if (efficiencyChart) efficiencyChart.destroy();
                        efficiencyChart = new Chart(effCtx, {
                            type: 'line',
                            data: {
                                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                                datasets: [
                                    {
                                        label: 'Your Fleet',
                                        data: [1.22, 1.19, 1.21, 1.18, 1.16, 1.18],
                                        borderColor: '#3b82f6',
                                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                        fill: true,
                                        tension: 0.4,
                                        borderWidth: 3,
                                    },
                                    {
                                        label: 'Industry Benchmark',
                                        data: [1.30, 1.29, 1.28, 1.28, 1.27, 1.28],
                                        borderColor: '#9ca3af',
                                        backgroundColor: 'rgba(156, 163, 175, 0.05)',
                                        borderDash: [5, 5],
                                        fill: false,
                                        tension: 0.4,
                                        borderWidth: 2,
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        display: true,
                                        position: 'top',
                                        labels: {
                                            usePointStyle: true,
                                            padding: 15
                                        }
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(context) {
                                                return context.dataset.label + ': ' + context.parsed.y + ' kWh/km';
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: false,
                                        min: 1.0,
                                        max: 1.4,
                                        title: {
                                            display: true,
                                            text: 'kWh/km'
                                        }
                                    },
                                    x: {
                                        grid: {
                                            display: false
                                        }
                                    }
                                }
                            }
                        });
                    }

                    // Battery Health Distribution Chart
                    const socCtx = document.getElementById('socChart');
                    if (socCtx) {
                        if (socChart) socChart.destroy();
                        socChart = new Chart(socCtx, {
                            type: 'bar',
                            data: {
                                labels: ['95-100%', '90-95%', '85-90%', '80-85%', '<80%'],
                                datasets: [
                                    {
                                        label: 'Your Fleet',
                                        data: [12, 18, 9, 2, 1],
                                        backgroundColor: '#3b82f6',
                                        borderRadius: 6,
                                    },
                                    {
                                        label: 'Benchmark',
                                        data: [8, 14, 11, 5, 4],
                                        backgroundColor: '#d1d5db',
                                        borderRadius: 6,
                                    }
                                ]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'top',
                                        labels: {
                                            usePointStyle: true,
                                            padding: 15
                                        }
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(context) {
                                                return context.dataset.label + ': ' + context.parsed.y + ' vehicles';
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        title: {
                                            display: true,
                                            text: 'Number of Vehicles'
                                        }
                                    },
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Battery Health (SoH %)'
                                        }
                                    }
                                }
                            }
                        });
                    }
                };

                onMounted(() => {
                    setTimeout(() => {
                        initCharts();
                    }, 100);
                });

                watch([currentView, portalPage], () => {
                    if (currentView.value === 'portal' && portalPage.value === 'dashboard') {
                        setTimeout(() => {
                            initCharts();
                        }, 100);
                    }
                });

                return {
                    currentView,
                    portalPage,
                    adminPage,
                    mobilePage,
                    portalMenu,
                    adminMenu,
                    kpis,
                    alerts,
                    vehicles,
                    benchmarks,
                    benchmarkMetrics,
                    selectedManufacturer,
                    selectedRegion,
                    tenants,
                    chargingStations,
                    chargingSchedule,
                    reports,
                    getStatusClass,
                    getStatusIcon,
                    getBatteryColor,
                    downloadPDFReport,
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
